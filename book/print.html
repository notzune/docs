<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AirshipCraft Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/pagetoc.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="CHANGELOG.html">Changelog</a></li><li class="chapter-item expanded affix "><li class="part-title">Mechanics</li><li class="chapter-item expanded "><a href="mech/economy.html"><strong aria-hidden="true">1.</strong> Economy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/economy/market.html"><strong aria-hidden="true">1.1.</strong> Market</a></li><li class="chapter-item expanded "><a href="mech/economy/spreadsheet.html"><strong aria-hidden="true">1.2.</strong> Spreadsheet</a></li><li class="chapter-item expanded "><a href="mech/economy/banking.html"><strong aria-hidden="true">1.3.</strong> Banking</a></li><li class="chapter-item expanded "><a href="mech/economy/companies.html"><strong aria-hidden="true">1.4.</strong> Companies</a></li><li class="chapter-item expanded "><a href="mech/economy/resources.html"><strong aria-hidden="true">1.5.</strong> Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/economy/resources/crops.html"><strong aria-hidden="true">1.5.1.</strong> Crops</a></li><li class="chapter-item expanded "><a href="mech/economy/resources/hiddenore.html"><strong aria-hidden="true">1.5.2.</strong> HiddenOre</a></li></ol></li><li class="chapter-item expanded "><a href="mech/economy/API.html"><strong aria-hidden="true">1.6.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/economy/api/hierarchy.html"><strong aria-hidden="true">1.6.1.</strong> Class Hierarchy</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="mech/npc.html"><strong aria-hidden="true">2.</strong> NPCs</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Types</div></li></ol></li><li class="chapter-item expanded "><a href="mech/combat.html"><strong aria-hidden="true">3.</strong> Combat</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/combat/movecraft.html"><strong aria-hidden="true">3.1.</strong> Movecraft</a></li><li class="chapter-item expanded "><a href="mech/combat/damagelistener.html"><strong aria-hidden="true">3.2.</strong> DamageListener</a></li><li class="chapter-item expanded "><a href="mech/combat/weapons.html"><strong aria-hidden="true">3.3.</strong> Artifacts</a></li></ol></li><li class="chapter-item expanded "><a href="mech/skills.html"><strong aria-hidden="true">4.</strong> Skills</a></li><li class="chapter-item expanded "><a href="mech/cults.html"><strong aria-hidden="true">5.</strong> Cults</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/cults/objects.html"><strong aria-hidden="true">5.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="mech/cults/config.html"><strong aria-hidden="true">5.2.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="mech/cults/altars.html"><strong aria-hidden="true">5.3.</strong> Altars</a></li><li class="chapter-item expanded "><a href="mech/cults/shrines.html"><strong aria-hidden="true">5.4.</strong> Shrines</a></li><li class="chapter-item expanded "><a href="mech/cults/transmutations.html"><strong aria-hidden="true">5.5.</strong> Transmutations</a></li></ol></li><li class="chapter-item expanded "><a href="mech/nodes.html"><strong aria-hidden="true">6.</strong> Nodes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/nodes/territories.html"><strong aria-hidden="true">6.1.</strong> Territories</a></li><li class="chapter-item expanded "><a href="mech/nodes/handles-over-ids.html"><strong aria-hidden="true">6.2.</strong> Prefer Handles over IDs</a></li><li class="chapter-item expanded "><a href="mech/nodes/nation-system.html"><strong aria-hidden="true">6.3.</strong> Nation System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mech/nodes/nations/objects.html"><strong aria-hidden="true">6.3.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="mech/nodes/nations/permissions.html"><strong aria-hidden="true">6.3.2.</strong> Permissions</a></li></ol></li><li class="chapter-item expanded "><a href="mech/nodes/npc-integration.html"><strong aria-hidden="true">6.4.</strong> NPC Integration</a></li></ol></li><li class="chapter-item expanded "><a href="mech/quests.html"><strong aria-hidden="true">7.</strong> Quests</a></li><li class="chapter-item expanded affix "><li class="part-title">Map</li><li class="chapter-item expanded "><a href="map/regions.html"><strong aria-hidden="true">8.</strong> Regions</a></li><li class="chapter-item expanded "><a href="map/cities.html"><strong aria-hidden="true">9.</strong> City States</a></li><li class="chapter-item expanded "><a href="map/mapoverview.html"><strong aria-hidden="true">10.</strong> Map Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Core</li><li class="chapter-item expanded "><a href="core/common-lib.html"><strong aria-hidden="true">11.</strong> ACCommonLib</a></li><li class="chapter-item expanded "><a href="core/datum.html"><strong aria-hidden="true">12.</strong> Datum</a></li><li class="chapter-item expanded affix "><li class="part-title">General Development</li><li class="chapter-item expanded "><a href="administration/housekeeping.html"><strong aria-hidden="true">13.</strong> Housekeeping</a></li><li class="chapter-item expanded "><a href="administration/optimization.html"><strong aria-hidden="true">14.</strong> Optimization</a></li><li class="chapter-item expanded "><a href="administration/coding-standard.html"><strong aria-hidden="true">15.</strong> Coding Standard</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="administration/commits.html"><strong aria-hidden="true">15.1.</strong> Proper Git Commits</a></li></ol></li><li class="chapter-item expanded "><a href="administration/project-timeline.html"><strong aria-hidden="true">16.</strong> Project Timeline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="administration/timeline/phase-1.html"><strong aria-hidden="true">16.1.</strong> Phase 1</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Misc</li><li class="chapter-item expanded "><a href="misc/lore.html"><strong aria-hidden="true">17.</strong> Lore</a></li><li class="chapter-item expanded affix "><a href="misc/contributions.html">Contributions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AirshipCraft Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <h1 id="an-introduction-to-airshipcraft"><a class="header" href="#an-introduction-to-airshipcraft">An Introduction to AirshipCraft</a></h1>
<blockquote>
<p>v2.1.0 | 
Documentation of the mechanics and vision of the server.</p>
</blockquote>
<hr />
<blockquote>
<p>📝 <strong>Info:</strong> This document was last updated on 2023-03-06</p>
<p>⚠️ <strong>Warning:</strong> All information should be treated as current unless specifically told otherwise.</p>
<p>❓ <strong>Looking for user guides? Click <a href="placeholder">here</a>.</strong></p>
</blockquote>
<p>All information provided in this document is aimed at giving new and existing members of the development team some insight into what the AirshipCraft: Reborn (AC:R) project hopes to achieve. This document will describe every important element of the server, including its history, community, target audience, and previous issues that we have encountered in previous iterations. More importantly, the document will include suggestions as to how we can fix those issues, planned features, mechanics, and gameplay design. </p>
<p>This is a living document. All content regarding mechanics and gameplay is subject to change as the project progresses. New features will constantly be implemented and documented as they are developed.</p>
<p>See the <a href="CHANGELOG.html">changelog</a> to see a list of features added/removed and/or updated.</p>
<p>This project utilizes <a href="https://semver.org/">SemVer</a> for its versioning structure. The correct project version number should be displayed at the top of this page as well as at the top of the changelog.</p>
<blockquote>
<p>⚠️ <strong>Warning:</strong> at the time of writing, the project is currently in major version 0, meaning there is no playable nor stable version as the project is still in its initial development stage. </p>
</blockquote>
<h2 id="a-brief-history"><a class="header" href="#a-brief-history">A Brief History</a></h2>
<p>This is the second iteration of AirshipCraft. The first iteration was produced by mjcrafter100 (now Grau_Wulf)'s original AirshipCraft in 2015. The vision for his server was little more than an SMP server inspired by Movecraft and Factions features, nothing else. Although simple, it was extremely popular and loved by many. As AirshipCraft evolved, the vision shifted to form a geopolitical server which would later be known as 'Total War'. The Total War series of Minecraft servers will continue to face its own iterations of changes, but the main focus was always some type of land-claiming plugin and Movecraft.</p>
<p>The early economy system was nothing more than a few chest shops found in random locations with different buy and sell prices to simulate different regional markets, encouraging players to travel around the map on “trade runs” to earn money. An archaic form of a “tech tree” was implemented, using server play time and permissions as a deciding factor in what weapons or equipment a player can access, which as you can imagine became quickly imbalanced.</p>
<p>AirshipCraft: Reborn (AC:R) is similar to the original AirshipCraft in that it has a heavy focus on Movecraft mechanics. However, that is where the similarities end.</p>
<h2 id="project-overview"><a class="header" href="#project-overview">Project Overview</a></h2>
<blockquote>
<p>This page will serve as an overview of the entire project. Topics which require more in-depth explanations and plans for their implementation will receive their own section. These sections can be found in the table of contents located on the left-hand side of this page.</p>
</blockquote>
<h3 id="outline"><a class="header" href="#outline">Outline</a></h3>
<p>The purpose of this project is to fulfil the vision of creating a &quot;true&quot; geopolitical experience in Minecraft. Although it is not based on an Earth map, the map is Earth-like enough to encourage the natural growth and creation of nation-states through either player or NPC manipulation. &quot;Dynamic&quot; is the key buzzword for this project.</p>
<p>The world, much like real-life, should feel fluid (constantly changing). The project will include dynamic market prices as a result of:</p>
<ul>
<li>Inflation</li>
<li>Supply and demand patterns</li>
<li>Wars and diplomatic actions by foreign nations</li>
<li>Natural disasters </li>
</ul>
<p>All examples listed above are features that this project will attempt to replicate in the virtual world. </p>
<p>A primary focus of this project is its concentration on NPCs, heavily involving them within embedded game mechanics. This is to keep gameplay constantly engaging for the end user to maximize their gameplay experience.</p>
<p>With NPC-controlled nation-states scattered across the map, there will always be something for the player to do. In theory, the server should be fun and playable even if the player is completely alone on the server.</p>
<p>The goal of the economy is to be player-driven. There should be enough incentive for players to acquire currency without there being too many obstacles in place which may serve as a  potential deterrent for new players. Finding a good balance is difficult, but not impossible. </p>
<blockquote>
<p>See <a href="mech/economy.html">Economy</a></p>
</blockquote>
<p>We want to provide a server where realistic strategy, tactics, and creative thinking will allow players to get ahead. We want players to be able to own and control their own fully functioning and dynamic nations, towns and empires. We seek to find the balance between complexity and simplicity. Allowing for in-depth and complex mechanics but still being extremely player and 'noob friendly', providing a steep enough learning curve to separate the good players from the amateurs in a wider degree of aspects than just raw Minecraft skill. </p>
<p>Although AirshipCraft was never traditionally marketed as a “roleplay” server (and still technically isn’t), we are taking steps to emulate a form of “roleplay” environment to immerse players in this new world we are building. This includes the writing of lore, the creation of a quest system, player cards and other things that promote roleplay. Roleplay is highly encouraged but will not be enforced as it should be allowed to occur naturally.</p>
<h3 id="game-design"><a class="header" href="#game-design">Game Design</a></h3>
<p>This project is designed with the mindset of building a game. The goal is to design and implement gameplay elements that foster player engagement and boost player retention. Although the server is designed so it can be fun without being populated, it's mutually beneficial for all parties if there is an established player base.</p>
<p>This graph outlines a player’s skill vs. difficulty: </p>
<p><img src="images/skill-vs-difficulty.webp" alt="Skill Vs. Difficulty" /></p>
<p>Note: this shows three difficulty levels and how players react to them based on their skills. Also, note that the blue line enters all three boxes, which is important to get the most players interested in the gameplay.</p>
<p>By itself, this means nothing. However, combine it with this graph:</p>
<p><img src="images/interest-and-efficacy.jpeg" alt="Player Interest/Efficacy" /></p>
<p>This shows that, in the median, player interest is tied to efficacy. In other words, the better you are at something, the more you’re interested. The interest rate drops according to standard deviations from the median difficulty line as shown in the first graphic. </p>
<p>The full meaning of both of these graphs isn't realized until we look at this next graph:</p>
<p><img src="images/difficulty-challenge-graph.jpeg" alt="Difficulty and Challenge" /></p>
<p>This graph shows that as you move across difficulty levels, you engage players. This implies you have a game that can watch a player’s reactions and scale difficulty based on their performance. The AI needs to constantly move between the optimal challenge line, and the blue line in the first graph. It is based on these assumptions:</p>
<ol>
<li><strong>One cannot design a difficulty that is perfect for everyone.</strong></li>
<li>Therefore, we must move the player above and below the difficulty line using rewards.</li>
<li>The best way to do this is to provide multiple reward types that cater to different styles of play.</li>
</ol>
<p>Rather than categorize players as high-skill vs. low-skill, attenuate the game to make players feel highly skilled and low-skilled. Both levels serve a purpose, as graph 3 shows. Note that the stuff in the quotation marks in graph 3 are the negatives of this mode.</p>
<p>Given this, we think of the following as guiding principles:</p>
<ul>
<li>As players move above the optimal challenge line, they feel high satisfaction.
<ul>
<li>Keep them there too long and they quickly devolve into more negative feelings about the play being ‘too easy’ or ‘childish’.</li>
</ul>
</li>
<li>As players move below the optimal challenge line, it leads to a high player effort to succeed.
<ul>
<li>Here the positive emotions of challenge and excitement are balanced by the negative pitfalls of it being ‘too hard’ or ‘frustrating’. You can’t keep them here too long either.</li>
</ul>
</li>
<li>The key to successful engagement is to move players across this line using a rewards system that caters to both high satisfaction (ranks, levels, recognition, Right Brain motivators) and high effort (items, upgrades, bonuses, Left Brain motivators).</li>
</ul>
<p>And finally, again:</p>
<ul>
<li><strong>No two people are the same</strong>, so there is no true ‘optimal challenge line’. It is a construct used to understand from measurements when to make hurdles harder or easier based on individual player performance.</li>
</ul>
<p>This is one way to deal with player engagement and create addiction. Great games closely adhere to the ‘Optimal Challenge Line’ as created by each player’s skill and use the Octalysis drivers to push players back and forth across the line.</p>
<p>Octalysis is a great breakdown of player motivations by Yu-Kai Chou. We can use the drivers here to motivate high-satisfaction and high-effort players, as each responds differently.</p>
<p>This is beautifully captured in this graphic:</p>
<p><img src="images/gamification.jpeg" alt="Octalysis of Gamification" /></p>
<p>The graph is a very good guide on what should be kept in mind when proceeding with the development of the server/project. We can, however, for the sake of simplicity, focus mainly on the key points of the graph.</p>
<ul>
<li><strong>Progress</strong>: 
<ul>
<li>As players advance in the game, they should feel a sense of accomplishment. Clear objectives, like levelling up different skills or tech trees, unlocking new items or abilities, or things such as making the world more &quot;exploration worthy&quot; can help achieve this.</li>
</ul>
</li>
<li><strong>Feedback</strong>: 
<ul>
<li>Players must receive immediate feedback on their actions, such as points earned or money earned, in order to improve gameplay and keep them engaged.</li>
</ul>
</li>
<li><strong>Difficulty</strong>: 
<ul>
<li>The game should be challenging enough to be engaging without being too difficult to the point where players give up in frustration.</li>
</ul>
</li>
<li><strong>Social</strong>: 
<ul>
<li>
<p>To encourage players to compete with one another, the game should have a social element like leaderboards or some sort of way to give players &quot;bragging rights&quot; but also make those bragging rights worthy of being sought out.</p>
<ul>
<li>An example could possibly be the <a href="mech/cults.html">cults</a> system, or the <a href="mech/nodes.html">nodes</a> system.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Replayability</strong>: 
<ul>
<li>The game should entice players to return and play it repeatedly. Randomly generated content, an immersive and dynamic world, and other event-like activities and objectives can help accomplish this.</li>
</ul>
</li>
</ul>
<p>A good storyline can engage players and make them want to keep playing to see what happens next. We aim to accomplish this by providing multiple quest lines that have benefits and impacts on the player who chooses to complete them and possibly (slight) drawbacks to those who don't, in order to gently nudge players to keep playing and trying different things.</p>
<h3 id="philosophy"><a class="header" href="#philosophy">Philosophy</a></h3>
<p>It's important to maintain a commonly shared philosophy when designing or working on mechanics. The general mantra is to add quality of life (QOL) improvements to the player whenever possible. If we are able to streamline the boring, basic, vanilla mechanics and make it very easy, or in some cases automated, for the player, the player can focus on the unique, more interesting and &quot;fun&quot; mechanics we have designed for them.</p>
<p>If a player sits and has to mine or farm for resources manually for everything they need, then they will only spend about 1/4th or less of their time actually playing the game, since 3/4ths of it would be spent grinding. <strong>Try to limit unnecessary grinds.</strong></p>
<p>Designing any sort of progression system or mechanic that requires players to put in the effort is <strong>good</strong> (as we have stated before in the previous section), however, there's a difference between challenging and time-consuming and we want to limit time-consuming whenever possible. </p>
<h3 id="purpose-of-these-docs"><a class="header" href="#purpose-of-these-docs">Purpose of These Docs</a></h3>
<p>This documentation serves as a guide to potential/future developers who have graciously volunteered or have been brought on to the team to work on AirshipCraft.</p>
<p>Planned features which are outlined and explained in any of the subsections to the left of this page might include a note at the top of the page such as: </p>
<blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<blockquote>
<p><span style="color:green">Implemented as of YYYY-MM-DD.</span></p>
</blockquote>
<blockquote>
<p><span style="color:yellow">Currently being developed as of YYYY-MM-DD.</span></p>
</blockquote>
<p>These notes give a sort of status indication of what features have been added, which are currently being worked on, and what features have not been implemented at all.</p>
<hr />
<p><strong>Written by</strong>:<br />
Zeyad “zune” Rashed,<br />
Head Developer and Project Manager<br />
AirshipCraft<br />
AirshipCraft: Reborn</p>
<p><strong>Contact</strong>:<br />
<a href="https://www.airshipcraft.tk/">Website</a> (Homepage)<br />
<a href="https://discord.gg/E287MWbVUK">Discord</a> (Discord)<br />
<a href="https://github.com/notzune/docs/issues">GitHub</a> (GitHub Repo)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changelog"><a class="header" href="#changelog">Changelog</a></h1>
<p>All notable changes to this project will be documented in this file. This includes new features in-game, such as plugins or mechanics, changes to existing features, plugins, mechanics, or additions/removals to the backend or frontend of the website or databases involved in the project, as well as changes to this documentation. </p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>,
and this project adheres to <a href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>
<h2 id="v212---2023-03-03---2023-03-06"><a class="header" href="#v212---2023-03-03---2023-03-06">[v2.1.2] - 2023-03-03 - 2023-03-06</a></h2>
<h3 id="added"><a class="header" href="#added">Added</a></h3>
<ul>
<li>Docs:
<ul>
<li>Added new <a href="mech/economy.html">Economy</a> related pages:
<ul>
<li><a href="mech/economy/banking.html">Banking</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="changed"><a class="header" href="#changed">Changed</a></h3>
<ul>
<li>Docs:
<ul>
<li>Restructuring of certain sections:
<ul>
<li>NPC</li>
<li>Nodes</li>
</ul>
</li>
<li>Renamed <code>PlayerStats</code> -&gt; <a href="core/datum.html">Datum</a></li>
</ul>
</li>
</ul>
<h3 id="fixed"><a class="header" href="#fixed">Fixed</a></h3>
<ul>
<li>Docs:
<ul>
<li>Fixed incorrect page being displayed for <a href="core/playerstats.html">PlayerStats</a></li>
</ul>
</li>
</ul>
<h2 id="v211---2023-1-24---2023-02-27"><a class="header" href="#v211---2023-1-24---2023-02-27">[v2.1.1] - 2023-1-24 - 2023-02-27</a></h2>
<h3 id="added-1"><a class="header" href="#added-1">Added</a></h3>
<ul>
<li>Docs:
<ul>
<li><del>Began writing of the project overview</del>. (DONE!)</li>
<li>Added various economy related pages.</li>
<li>Begun implementation of page tags such as &quot;Unimplemented&quot;, &quot;Implemented&quot; and &quot;Currently being developed&quot;.
<ul>
<li>For now they are just text tags.</li>
</ul>
</li>
<li>Created new Misc. section.
<ul>
<li>Currently includes &quot;Lore&quot; and &quot;Quest&quot; pages.</li>
</ul>
</li>
<li>Added &quot;philosophy&quot; section to the introduction page.</li>
<li>Added page for <a href="mech/nation-system.html">land claiming</a>.</li>
<li>Added page explaining <a href="mech/nodes.html">nodes</a>.
<ul>
<li>Page to explain the <a href="mech/nodes/territories.html">territories</a> better.</li>
<li>Explain using <a href="mech/nodes/handles-over-ids.html">handles over IDs</a>.</li>
</ul>
</li>
<li>Economy related pages:
<ul>
<li><a href="mech/economy/resources.html">Resources</a>.</li>
<li><a href="mech/economy/market.html">Market</a>.</li>
<li><a href="mech/economy/banking.html">Banking</a>.</li>
<li>Started explaining the <a href="mech/economy/API.html">API</a>
<ul>
<li>Class <a href="mech/economy/api/hierarchy.html">Hierarchy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="mech/cults.html">Cults</a> page.
<ul>
<li>Explanation of <a href="mech/cults/objects.html">cult objects</a>.</li>
<li>Breakdown of <a href="mech/cults/altars.html">Altars</a></li>
<li>Explanation of <a href="mech/cults/transmutations.html">Transmutations</a></li>
</ul>
</li>
<li><a href="misc/playerstats.html">Player Stats</a> page and diagram.</li>
<li>Added a <a href="administration/project-timeline.html">project timeline</a> and associated pages:
<ul>
<li><a href="administration/timeline/phase-1.html">Phase 1</a>.</li>
<li><a href="administration/housekeeping.html">Housekeeping</a> is meant to serve as a guideline to keep code uniform and encourage best practices to keep the project organized.</li>
<li>Also added <a href="administration/coding-standard.html">Coding Standard</a>, <a href="administration/optimization.html">Optimization</a> and <a href="administration/commits.html">Commits</a></li>
</ul>
</li>
<li>Added a &quot;Core&quot; section discussing the core components that make up the backbone of the project.
<ul>
<li><a href="core/common-lib.html">Common Library</a> page outlining the framework and its functionality.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="changed-1"><a class="header" href="#changed-1">Changed</a></h3>
<ul>
<li>Docs:
<ul>
<li>Changed structure of the table of contents.
<ul>
<li>Moved the Map section underneath the Mechanics section as it made more sense.</li>
<li>Moved &quot;Lore&quot; page to no longer be nested underneath the Map section and instead moved under Misc.</li>
<li>Moved &quot;Claiming System&quot; page to be nested under Nodes instead of its own section as it makes more sense.</li>
<li>Moved &quot;PlayerStats&quot; to the core section as it makes more sense.</li>
</ul>
</li>
<li>Updated footer on first page.</li>
<li>Fixed various small formatting errors .</li>
<li>Updated <a href="misc/contributions.html">contributions</a> page.</li>
<li>Changed <code>Administration</code> -&gt; <code>General Development</code>
<ul>
<li>Better reflection of what the section is meant for.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="removed"><a class="header" href="#removed">Removed</a></h3>
<ul>
<li>Docs:
<ul>
<li>Removed Nation Objects page as it isn't necessary.</li>
</ul>
</li>
</ul>
<h2 id="v210---2023-1-2---2023-1-23"><a class="header" href="#v210---2023-1-2---2023-1-23">[v2.1.0] - 2023-1-2 - 2023-1-23</a></h2>
<h3 id="added-2"><a class="header" href="#added-2">Added</a></h3>
<ul>
<li>
<p>Web:</p>
<ul>
<li>Seperate repositories for better version control via git.
<ul>
<li>Created seperate repo to hold the documentation.</li>
<li>Created seperate repo for homepage.</li>
</ul>
</li>
<li>Started work on <code>/craftviewer</code> and <code>/market</code>.</li>
</ul>
</li>
<li>
<p>Discord:</p>
<ul>
<li>In process of creating seperate Discord server exclusively for developmental purposes.</li>
<li>Arya
<ul>
<li>Creation of seperate repository for Arya's core module for better version controlling.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Server:</p>
<ul>
<li>Upgraded server hardware to 6 cores and 16 GB RAM.</li>
<li>Set up <code>rdiff-backup</code> in-order to periodically backup the map.</li>
<li>Pruned uneccesary/redundant testing environments.</li>
</ul>
</li>
<li>
<p>Map:</p>
<ul>
<li>
<p>Began work on &quot;Port Xile&quot; as well as plotting out the starting point for &quot;Bettesville&quot;.</p>
</li>
<li>
<p>&quot;Port Xile&quot;:</p>
<ul>
<li>Market area completed, needs polishing/decorating.</li>
<li>Social area half finished, feels empty atm.</li>
<li>Main fortress near complete needs interior/rooms.</li>
<li>Residential area near complete, needs a few more blocks to fill out space, as well as creation of a &quot;high end&quot; district.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="changed-2"><a class="header" href="#changed-2">Changed</a></h3>
<ul>
<li>
<p>Misc:</p>
<ul>
<li>Fixed project version to display <code>v2</code> instead of <code>v0</code>.</li>
</ul>
</li>
<li>
<p>Docs:</p>
<ul>
<li>Restructuring of the documentation.</li>
<li>Creation of user guides.</li>
<li>Began writing of the project overview.</li>
</ul>
</li>
</ul>
<h3 id="removed-1"><a class="header" href="#removed-1">Removed</a></h3>
<ul>
<li>
<p>Web:</p>
<ul>
<li>Documentation and homepage from main web repository, moved to seperate repo.</li>
<li>Configured Dynmap.
<ul>
<li>To use external webserver instead of the default internal webserver.</li>
<li>Installed LiveAtlas UI.</li>
<li>New link: <a href="https://airshipcraft.tk/map">https://airshipcraft.tk/map</a>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Discord:</p>
<ul>
<li>Moved <code>core</code> module of Arya to seperate repository.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="economy"><a class="header" href="#economy">Economy</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The economy is a crucial point of the project/server. It builds the core of the overall gameplay design as it gives players a purpose. Building a good economic system within the game is a crucial step in setting the foundation for creating a positive feedback loop in the player's experience.</p>
<p>A good economy allows players to trade and exchange resources in order to progress or improve their gameplay experience. Our economic system aims to include elements such as supply and demand, inflation, and player-driven marketplaces. A good economic system should allow for player choice and strategy, as well as create opportunities for players to specialize in certain in-game activities. A balanced economy can prevent exploitation and provide fair opportunities for players to acquire resources.</p>
<p>A balanced economy can prevent exploitation by ensuring that there is a fair distribution of resources and opportunities for all players. This can be achieved through a variety of methods, such as setting limits on the number of resources that can be gathered or traded, or adjusting the costs of goods and services based on supply and demand; both methods we plan to implement.</p>
<p>Additionally, a balanced economy can prevent players from cornering the market on a particular resource, or charging exorbitant prices for goods or services, by placing caps on the prices that can be charged or by adjusting the availability of resources based on player actions.</p>
<p>If the economy is well designed, it will be easier for players and moderators to be able to detect suspicious activity that could be caused by player exploitation, as such, allowing for quicker patches.</p>
<blockquote>
<p>See <a href="mech/economy/market.html">Market</a></p>
</blockquote>
<h2 id="currency"><a class="header" href="#currency">Currency</a></h2>
<p>A physical item currency will be implemented. Theoretically, we will be able to allow players to mint their own currencies and assign them value based on in-game factors to allow for currency exchanges and a more competitive economic ecosystem.</p>
<p>This will also allow for more complex actions and for more customizability and incentives to form things such as <a href="mech/economy/banking.html">banks</a> and <a href="mech/economy/companies.html">companies</a>.</p>
<p>Also, by implementing a physical item-based currency, it gives greater incentive to raiding, PvP, and wars.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="market"><a class="header" href="#market">Market</a></h1>
<p>The market system is one of the key features of the entire project as it serves as the backbone of the economy. Caution must be used when designing, discussing, or working on features of the economy in general and the market system in particular. Measures need to be taken to ensure the system can not be gamed or at least the gaming of the system will be kept to a minimum. With a proper dynamic economy, we can avoid players finding METAs that break the economy.</p>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>There will be two parts to the market. The <strong>global</strong> and the <strong>local</strong> market. </p>
<p>The <strong>global market</strong> determines things on a server-wide scale, such as a price ceiling to set the default cost of items put on sale on the market if not specified by the user. It also creates an index on the webserver as a reference for players to be able to see a <a href="mech/economy/economy/spreadsheet.html">spreadsheet</a> of the current market prices of items. The global market is meant to be a guideline to building the local markets but should not be limited to the end user in any real way.</p>
<p>The <strong>local market</strong> determines the prices and sale of goods on a <a href="mech/economy/../../map/regions.html">region</a> basis. Much like the <strong>global market</strong>, the local market sets price ceilings on items and uses the global market prices to set the maximum initial price on items. The local market also records how many unique vendors sell a certain item in that region and inversely raises the price ceiling to allow players a chance to be able to corner the market in that specific region.</p>
<h2 id="the-global-market"><a class="header" href="#the-global-market">The Global Market</a></h2>
<p>The <strong>global market</strong> monitors the <strong>supply</strong> of items server-wide. Supply is the number of items submitted to chests connected to a vendor/merchant <a href="mech/economy/NPCs/types/merchants.html">NPC</a>. This keeps track of the <strong>global supply</strong> of items. As the supply increases, the global price cap lowers, which in turn will lower the global default initial pricing of items. </p>
<p>An initial price point is required due to the hyperbolic formula used in determining dynamic market prices. It would be impossible to buy any item if it reaches 0.</p>
<h3 id="inflation"><a class="header" href="#inflation">Inflation</a></h3>
<p>The initial price point (after it is first configured by an Administrator via the configuration file) is affected by in-game inflation rates using the formula:</p>
<p><code>R = ((B - A)/A) x 100</code></p>
<blockquote>
<p>Where A = starting cost; B = ending cost; R = inflation rate</p>
</blockquote>
<p>How it works: It takes the pre-configured initial price point for an item (B) and after a month(?) compares it with the mean price point of that specific item across all of the registered local markets (A). The resulting rate (R) is then subtracted from the starting price point (A) and the new market month begins.</p>
<h2 id="the-local-market-per-region-markets"><a class="header" href="#the-local-market-per-region-markets">The Local Market (Per-region Markets)</a></h2>
<p>The <strong>local market</strong> is where the really interesting part begins. The local market, like the <strong>global market</strong> sets an initial price on items based on two factors:</p>
<p>The first factor is the global market's initial price. The local market's initial price cap should always either equal or be less than the global market's. </p>
<p>By default, all items start in initial pricing mode. Initial pricing is a temporary price cap or ceiling that keeps prices low until a reasonable amount of the item has been sold to the shop. The price of an item will not change while it is in dynamic pricing mode.</p>
<p>Due to the nature of the pricing formula, an item with 0 stock has an infinite sell value when in dynamic pricing mode. Initial pricing is there to fix this issue. Tradeable objects will automatically switch to dynamic pricing mode whenever the dynamic price is less than the initial price. </p>
<h2 id="dynamic-pricing"><a class="header" href="#dynamic-pricing">Dynamic Pricing</a></h2>
<p>The main purpose of this economic system is to allow for dynamic price changes in the server's economy in order to prevent stagnant gameplay and force players to constantly adapt to market prices instead of abusing a singular trading META.</p>
<p>Dynamic pricing mode will automatically be activated for all items once they reach a certain stock level. Once in dynamic mode, the price of the item will vary depending on how much stock is available for that item.</p>
<p>As the stock approaches 0, the price will approach infinity, and as the stock approaches infinity, the price will approach 0. This means that it is essentially impossible to purchase the final item in a shop whenever it is in dynamic pricing mode. The pricing formula is as follows: </p>
<p><code>price = (median * value) / stock.</code> </p>
<h2 id="taxation"><a class="header" href="#taxation">Taxation</a></h2>
<p>This economic system will allow for different forms of taxation. Taxes, by default, are deposited into the region's bank account unless an eligible bank account is found. </p>
<pre><code>                  ┌───────────────┐
                  │Collected Taxes│
                  └──────┬────────┘
                         │
                         │
                         │
                         ▼
                  ┌──────────────────────┐
                  │                      │
                  │ Available town bank? │
                  │                      │
                  └─────────┬────────────┘
                            │
                            │
                            ▼
                  ┌────────────────────────┐
                  │                        │
                  │ Available nation bank? │
                  │                        │
                  └──────────┬─────────────┘
                             │
                             │
                             │
                             ▼
                  ┌──────────────────────┐
                  │                      │
                  │  Region bank account │
                  │                      │
                  └──────────────────────┘
</code></pre>
<blockquote>
<p>📝 <strong>Note:</strong> Here is a chart showing the priority hierarchy of where the taxes are deposited.</p>
</blockquote>
<p>Tax rates default to whatever is defined in the <code>config.yml</code> to be the &quot;global tax rate&quot;, but if a shop is within the territory of a town or nation and they have set its tax rate, then it will use that rate instead. If both the town and the nation set a tax rate, it would take the average of both numbers.</p>
<h3 id="purchase-tax"><a class="header" href="#purchase-tax">Purchase Tax</a></h3>
<p>Purchase tax is applied when items are purchased in dynamic pricing mode. If the tax rate were 3%, the tax charged for the purchase would be 3% of the purchase price.</p>
<h3 id="initial-tax"><a class="header" href="#initial-tax">Initial Tax</a></h3>
<p>Initial tax is applied when items are purchased in initial pricing mode. It works just like a purchase tax.</p>
<h3 id="enchantment-tax"><a class="header" href="#enchantment-tax">Enchantment Tax</a></h3>
<p>Enchantment tax is applied when enchantments are purchased. Enchantment tax will apply to all enchantments unless they are in static pricing mode.</p>
<h3 id="dynamic-sales-tax"><a class="header" href="#dynamic-sales-tax">Dynamic Sales Tax</a></h3>
<p>It allows poor players to make more money during sales than rich players. Dynamic tax will only be applied when the player's balance is between the money-floor and the money-cap defined in config.yml. The maximum tax rate defined in config.yml will be applied when the player's balance is equal to or greater than the money-cap. If the max tax is set to 100 percent the player will no longer make money when selling items to a server shop. At the money floor, no tax will be applied. Between the cap and floor, the tax rate will gradually increase as the player's balance approaches the money cap.</p>
<blockquote>
<p>See also <a href="mech/economy/banking.html">Banking</a>, and the <a href="mech/economy/../nodes/nation-system.html">Nation System</a></p>
</blockquote>
<h4 id="taxed-transaction"><a class="header" href="#taxed-transaction">Taxed Transaction</a></h4>
<pre><code class="language-java">public interface TaxedTransaction extends EconomyTransaction {

    /**
     * Add a tax collector to this taxed transaction. The tax collector account receives the taxes from this
     * transaction.
     *
     * @param taxCollector account to receive the taxes.
     * @return taxed transaction with tax collector
     */
    TaxedTransaction setCollectedBy(Account taxCollector);

    /**
     * Return the amount of taxes to be paid in this transaction.
     *
     * @return the amount of taxes to be paid in this transaction.
     */
    double getTax();
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="spreadsheet"><a class="header" href="#spreadsheet">Spreadsheet</a></h1>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="banking"><a class="header" href="#banking">Banking</a></h1>
<p>Banking goes hand in hand with the <code>Market</code> system as it provides a method for storing players money. We already know from the class <a href="mech/economy/api/hierarchy.html">hierarchy</a> that there exists player and non player accounts, but this banking system turns them into physical locations and not just hidden away as text in some database.</p>
<h2 id="what-are-banks"><a class="header" href="#what-are-banks">What Are Banks?</a></h2>
<p>A bank is a financial institution licensed to receive deposits and make loans. There are several types of banks including retail, commercial, and investment banks. In most countries, banks are regulated by the national government or central bank.</p>
<p>The goal is to try and emulate this in game as well. Allowing for <a href="mech/economy/../nodes/nation-system.html">nations</a> to create their own physical national banks tied directly to their economies, as well as providing the more established NPC nations their own banks as well that can give out loans and financially back and assist the player as a way for them to store their money there until their own nation becomes financially stable.</p>
<h2 id="bank-vaults"><a class="header" href="#bank-vaults">Bank Vaults</a></h2>
<p>The main feature of banks is obviously their money storing capability and this is done through <code>Vaults</code>. Vaults are physical chests that players have inside the bank.</p>
<p>Bank vaults are registered with a chest with a sign placed upon it that reads &quot;[Vault]&quot;. Upon right-clicking the sign, it will update to display the name of the player registered to that vault such as this:</p>
<p><img src="mech/economy/../../images/vault_sign.png" alt="Vault sign example" /></p>
<p>Vaults can also be registered to other players by typing their names on the second line instead of leaving it blank.</p>
<p>Nations and settlements also require a vault in-order to store incoming taxes from <a href="mech/economy//mech/economy/market.html#taxed-transaction">taxed transactions</a> as well as a way for settlements/nations to pay upkeep in-order to keep their claims from dissolving due to inactivity. To make a vault for a nation, the setup is very similar except the name of the settlement/nation must be printed on the second line.</p>
<p>Finally, <a href="mech/economy/companies.html">Companies</a> can also register their own vaults in-order to store profits prior to payday, a source of money in-order to pay off dividends, and as a sort-of shared bank account between trusted employees. To register a company vault, the setup is the same: Place a sign with [Vault] on the first line, the name of the company on the second line, and INC on the third line. </p>
<h3 id="bank-vaults-and-balance"><a class="header" href="#bank-vaults-and-balance">Bank Vaults and Balance</a></h3>
<p>On most servers, a player can execute a command such as <code>/bal</code> or <code>/balance</code> in-order to view how much in-game currency they have. Since we already know that currency will be a physical item (<em>See</em>: <a href="mech/economy/market.html">Market</a>), it will be hard (and very unwise) for players to carry all of their money in their inventory at all times.</p>
<p>Since bank vaults act as storage for a player's money they should also have some practicality outside of that by displaying the player's combined balance of both the currency in their posession and currency stored elsewhere.</p>
<p>An example of how this would look like in-game:</p>
<pre><code>* player1 executed server command: /balance *

Chat: 

[Balance] {inventory amount, I}
[Vault Balance] {stored vault amount, V}
[Total] {total balance, I + V}
</code></pre>
<p>We can look at <a href="https://github.com/nikosgram/gringotts/blob/master/src/main/java/org/gestern/gringotts/GringottsAccount.java">Gringotts</a> for an example of how they did it:</p>
<pre><code class="language-java">/**
     * Current balance of this account in cents
     *
     * @return current balance of this account in cents
     */
    public long getBalance() {
        CompletableFuture&lt;Long&gt; cents     = getCents();
        CompletableFuture&lt;Long&gt; playerInv = countPlayerInventory();
        CompletableFuture&lt;Long&gt; chestInv  = countChestInventories();

        // order of combination is important, because chestInv/playerInv might have to run on main thread
        CompletableFuture&lt;Long&gt; f = chestInv
                .thenCombine(playerInv, Long::sum)
                .thenCombine(cents, Long::sum);

        return getTimeout(f);
    }

    /**
     * Current balance this account has in chest(s) in cents
     *
     * @return current balance this account has in chest(s) in cents
     */
    public long getVaultBalance() {
        return getTimeout(countChestInventories());
    }

    ...

    private CompletableFuture&lt;Long&gt; countChestInventories() {
        Callable&lt;Long&gt; callMe = () -&gt; {
            Collection&lt;AccountChest&gt; chests  = dao.retrieveChests(this);
            long                     balance = 0;
            
            for (AccountChest chest : chests) {
                balance += chest.balance();
            }

            Optional&lt;Player&gt; playerOpt = playerOwner();
            if (playerOpt.isPresent()) {
                Player player = playerOpt.get();

                if (Configuration.CONF.useVaultEnderChest &amp;&amp; Permissions.USE_VAULT_ENDERCHEST.isAllowed(player)) {
                    balance += new AccountInventory(player.getEnderChest()).balance();
                }
            }
            return balance;
        };

        return callSync(callMe);
    }
</code></pre>
<h2 id="banks-location"><a class="header" href="#banks-location">Banks (Location)</a></h2>
<p>This system also introduces a chunk plot called a <code>Bank</code> (can also be referred to as <code>Bank Plot</code> or <code>Bank Chunk</code>). Banks are registered when a <code>Nation Vault</code> is registered properly within the claims of that nation's capital.</p>
<p>This plot of land is special as it allows for nation leaders as well as those with the <code>Banker</code> <a href="mech/economy/../nodes/nations/permissions.html">permission</a> to do things such as give out loans to a player.</p>
<h3 id="loans"><a class="header" href="#loans">Loans</a></h3>
<p>Loan interest rate is configurable on a per town basis. Interest is compounded weekly.</p>
<p>In-order for a bank to give a loan, the bank must have that much money stored in a vault in-order to give it out. Once it is given out, the player who receives the loan will have that money transferred to their balance. After the due date for the loan is reached, whatever money in that player's physical vault with that bank will automatically go into paying for their debt.</p>
<p>If they were to have insufficient funds then that specific vault will have a negative balance and it will be reflected on their total balance. Players can choose simply not to pay back their loan but will still accrue interest until a <code>Banker</code> decides to &quot;forgive&quot; the loan.</p>
<p>Failure to pay off loans in a timely manner will decrease the player's <code>credit score</code> which will be viewable to anyone with the <code>Banker</code> permissions. </p>
<h3 id="minting-currencies"><a class="header" href="#minting-currencies">Minting Currencies</a></h3>
<blockquote>
<p>📝 <strong>Note:</strong> This section discusses allowing nations to mint their own currencies which can be exchanged following a global, &quot;dynamic&quot; exchange rate. This is a very complex mechanic and might be hard to implement so it might not be implemented or at least not fully implemented. HUGE WORK IN PROGRESS. Probably should just ignore this section until it gets more fleshed out.</p>
</blockquote>
<p>Banks are also used as a means to mint currencies. This option will only be available to large nations (size is configurable) as a way to keep the economy from getting too chaotic.</p>
<h4 id="requirements-to-mint-currency"><a class="header" href="#requirements-to-mint-currency"><strong>Requirements to Mint Currency</strong></a></h4>
<p>There are a few requirements in-order for nations to mint their own currencies. </p>
<ol>
<li>Firstly is the size requirement as mentioned earlier; nations must be over a specific (configurable) size in-order to mint their own currency. </li>
<li>Secondly is having <code>gold</code> in the bank. This includes ingots as well as nuggets. Currencies must be backed by gold in the bank in-order to be valid. This allows for currencies to be exchanged. </li>
</ol>
<p>When the prerequisites are met, nation leaders will able to run a command to register their currency with a name (string) and symbol (char). Once successfully created, the currency will be registered to the global economy. All currencies are backed by the value of the item <code>gold</code>. Exchange rates between different currencies will be generated based on a few factors which we will cover later.</p>
<p>Market stalls in <em>any</em> town/nation can be configured to accept any currency they choose that is registered globally. They can also choose to not accept certain currencies at any time of their choosing.</p>
<h4 id="exchange-rates"><a class="header" href="#exchange-rates"><strong>Exchange Rates</strong></a></h4>
<p>Currency exchanges between different types of currencies is handled by the bank. When depositing currency to a bank, the bank automatically converts it into the gold equivalent. If a foreign currency is deposited, then that gold is taken out of the original nation's bank into the new one. For example:<br />
// todo: i ran into some problems when trying to design a thought experiment </p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="companies"><a class="header" href="#companies">Companies</a></h1>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<p>One of the main components of the project is augmenting resource distribution in order to promote trade as well as warfare. A good system of handling resource distribution and collection goes hand-in-hand with a good <a href="mech/economy/../economy.html">economy</a> and <a href="mech/economy/../nation-system.html">claiming system</a>.</p>
<blockquote>
<p>See <a href="mech/economy/../nodes/territories.html">Territories</a></p>
</blockquote>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p>By creating scarcity in Minecraft we pave the way for things such as civilizations, politics, and nation building.</p>
<p>Scarcity can be controlled in three ways:</p>
<ul>
<li>Ore distribution</li>
<li>Crop growth rate and distribution</li>
<li>Animal breeding and spawn rates</li>
</ul>
<p>Manipulating crop growth and animal spawn rates affect the player directly as they create a food scarcity which will push them further to trade and/or travel to new areas.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="crops"><a class="header" href="#crops">Crops</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hiddenore"><a class="header" href="#hiddenore">HiddenOre</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api"><a class="header" href="#api">API</a></h1>
<p>The API portion of the Market system is used to hook all of the subsequent mechanics such as but not limited to the <a href="mech/economy/../cults.html">Cults</a> system, <a href="mech/economy/../nodes.html">Nations</a> system, and the <a href="mech/economy/../quests.html">Quests</a> system.</p>
<p>The Market API acts as an intermediary between consumer and provider plugins on the server, by allowing them to easily hook together using our API.</p>
<p>Provider plugins are those which offer a service within the server. Example providers would be something such as <code>LuckPerms</code> (permissions), <code>TheNewEconomy</code> (economy), and <code>VentureChat</code> (chat). Consumer plugins are those which utilize a provider plugin, such as <code>JobsReborn</code> (economy consumer).</p>
<h2 id="why-not-use-insert-name-here-economy-plugin"><a class="header" href="#why-not-use-insert-name-here-economy-plugin">Why not use [insert name here] economy plugin?</a></h2>
<p>There are various economy APIs already on the market such as Vault and, recently, Treasury (which we have been influenced heavily by) however these APIs are designed for wide use by the public. Therefore they are designed to fill a wide range of general purposes without any specialization for more niche or specific specialized use cases such as those that may arise with the nature of something like this project.</p>
<p><a href="https://github.com/MilkBowl/VaultAPI">Vault</a> served as (and currently still serving as) the leading Economy API for more than a decade now. However, that plugin hasn't been updated for the past several years besides simple maintenance updates and introduces no new features. It provides no support for something such as multiple currencies (i.e. <em>John has 9 coins and 4 tokens</em>), transactional history, more verbose economy responses (Vault simply states that a transaction has failed without providing a reason as to why it failed), or even transaction events.</p>
<p><a href="https://github.com/ArcanePlugins/Treasury/wiki/About-Treasury">Treasury</a> is a more recent API that hit the market at the start of 2022 and is (at the time of writing this page) currently going through a massive rewrite that has resulted in it being mostly unusable in its current state. However, it addresses a lot of the issues with Vault that were listed above. Our API is modeled heavily after Treasury which is reflected in the proposed <a href="mech/economy/api/hierarchy.html">hierarchy</a>.</p>
<p><a href="https://github.com/nikosgram/gringotts">Gringotts</a>, although not marketted as a standalone Economy API, does have functionality to act as one. It is the first (and iirc only) publically available plugin to use the concept of physical items translated into currency. We can use their repository as reference when building our system as their system is proven to work.</p>
<p><a href="https://github.com/coleweinman/HyperConomyX">HyperConomy</a> is the last plugin on this list that provides a decent API and infact already had a way of creating per-region markets as well as dynamic price changing. Our system is modeled similar to theirs in that aspect but HyperConomy suffered from countless bugs, was abandoned by its developers, and wasn't very user or server operator friendly. That being said, the concept was great and we can learn a lot from them and their shortcomings. You can consider our <code>Market</code> system as an upgraded, more refined version of <code>HyperConomy</code>.</p>
<h2 id="integration"><a class="header" href="#integration">Integration</a></h2>
<p>The main benefit of creating an Economy API from scratch is complete control over what goes into it. The goal of the API is to integrate seamlessly with projects such as <a href="mech/economy/../nodes.html"><code>Nodes</code></a> for example.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="class-hierarchy"><a class="header" href="#class-hierarchy">Class Hierarchy</a></h1>
<ul>
<li>java.lang.Object
<ul>
<li>java.util.AbstractCollection<E> (implements java.util.Collection<E>)
<ul>
<li>java.util.AbstractList<E> (implements java.util.List<E>)
<ul>
<li>java.util.AbstractSequentialList<E>
<ul>
<li>java.util.LinkedList<E> (implements java.lang.Cloneable, java.util.Deque<E>, java.util.List<E>, java.io.Serializable
<ul>
<li>tk.airshipcraft.market.api.common.misc.SortedList<T></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>tk.airshipcraft.market.api.economy.events.AccountTransactionEvent (implements tk.airshipcraft.market.api.common.event.Cancellable)
<ul>
<li>tk.airshipcraft.market.api.economy.events.NonPlayerAccountTransactionEvent</li>
<li>tk.airshipcraft.market.api.economy.events.PlayerAccountTransactionEvent</li>
</ul>
</li>
<li>tk.airshipcraft.market.api.common.event.Completion</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransaction</li>
<li>tk.airshipcraft.market.api.economy.transaction.TaxedTransaction (extends tk.airshipcraft.market.api.economy.transaction.EconomyTransaction)</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransaction.Builder</li>
<li>tk.airshipcraft.market.api.common.event.EventBus.EventSubscriberBuilder<T></li>
<li>tk.airshipcraft.market.api.common.event.EventSubscriber<T> (implements java.lang.Comparable<T>)
<ul>
<li>tk.airshipcraft.market.api.common.event.SimpleEventSubscriber<T></li>
</ul>
</li>
<li>tk.airshipcraft.market.api.common.event.FireCompletion<T></li>
<li>tk.airshipcraft.market.api.common.misc.FutureHelper</li>
<li>tk.airshipcraft.market.api.common.service.Service<T> (implements java.lang.Comparable<T>, java.util.function.Supplier<T>)</li>
<li>tk.airshipcraft.market.api.common.service.event.ServiceRegisteredEvent</li>
<li>tk.airshipcraft.market.api.common.service.event.ServiceUnregisteredEvent</li>
<li>java.lang.Throwable (implements java.io.Serializable)
<ul>
<li>java.lang.Exception
<ul>
<li>tk.airshipcraft.market.api.common.response.TreasuryException
<ul>
<li>tk.airshipcraft.market.api.economy.response.EconomyException</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="interface-hierarchy"><a class="header" href="#interface-hierarchy">Interface Hierarchy</a></h1>
<ul>
<li>tk.airshipcraft.market.api.economy.account.Account
<ul>
<li>tk.airshipcraft.market.api.economy.account.NonPlayerAccount</li>
<li>tk.airshipcraft.market.api.economy.account.PlayerAccount</li>
</ul>
</li>
<li>tk.airshipcraft.market.api.common.event.Cancellable</li>
<li>tk.airshipcraft.market.api.economy.currency.Currency</li>
<li>tk.airshipcraft.market.api.economy.EconomyProvider</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransactionInitiator<T></li>
<li>tk.airshipcraft.market.api.common.response.FailureReason</li>
<li>tk.airshipcraft.market.api.common.response.Subscriber&lt;T,E&gt;
<ul>
<li>tk.airshipcraft.market.api.economy.response.EconomySubscriber<T></li>
</ul>
</li>
</ul>
<h1 id="enum-hierarchy"><a class="header" href="#enum-hierarchy">Enum Hierarchy</a></h1>
<ul>
<li>java.lang.Object
<ul>
<li>java.lang.Enum<E> (implements java.lang.Comparable<T>, java.lang.constant.Constable, java.io.Serializable)
<ul>
<li>tk.airshipcraft.market.api.economy.account.AccountPermission</li>
<li>tk.airshipcraft.market.api.economy.misc.EconomyAPIVersion</li>
<li>tk.airshipcraft.market.api.economy.response.EconomyFailureReason (implements tk.airshipcraft.market.api.common.response.FailureReason)</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransactionImportance</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransactionInitiator.Type</li>
<li>tk.airshipcraft.market.api.economy.transaction.EconomyTransactionType</li>
<li>tk.airshipcraft.market.api.common.event.EventBus</li>
<li>tk.airshipcraft.market.api.common.event.EventPriority</li>
<li>tk.airshipcraft.market.api.economy.misc.OptionalEconomyApiFeature</li>
<li>tk.airshipcraft.market.api.common.service.ServicePriority</li>
<li>tk.airshipcraft.market.api.common.service.ServiceRegistry</li>
<li>tk.airshipcraft.market.api.common.misc.TriState</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="npcs"><a class="header" href="#npcs">NPCs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="combat"><a class="header" href="#combat">Combat</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="movecraft"><a class="header" href="#movecraft">Movecraft</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="damagelistener"><a class="header" href="#damagelistener">DamageListener</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="weapons"><a class="header" href="#weapons">Weapons</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="skills"><a class="header" href="#skills">Skills</a></h1>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:yellow">Currently being developed as of 2023-01-28.</span></p>
</blockquote>
<blockquote>
<p>⚠️ <strong>Warning:</strong> This page is still under construction!</p>
</blockquote>
<h1 id="cults"><a class="header" href="#cults">Cults</a></h1>
<p>The purpose of the cults plugin is to provide another layer to gameplay. By allowing players to be creative in creating these fictitious sects and design their own ideologies within the confines of the server, we open up avenues for player creativity and roleplay opportunities. As we have discussed in the introductory pages of this documentation, increasing player engagement is one of our main goals in designing this project.</p>
<h2 id="overview-3"><a class="header" href="#overview-3">Overview</a></h2>
<p>The proposed plan for the cult's system has many moving parts to it. This page was written in hopes to clarify the vision for the plugin and its integration within the project, including how it will interact with the other plugins/mechanics of the server. Each feature and mechanic of the plugin will be broken down further on this page and subsequent pages within this section.</p>
<blockquote>
<p>📝 <strong>Note:</strong> The terms &quot;deity&quot; and &quot;god&quot; are also interchangeable, as there is no difference between the two terms besides semantics.  God and deity are synonymous. According to their basic definitions, they both represent a supreme power. However, sometimes God as a term is used to represent the only supreme power, whereas deity can be used to refer to any of the forms of this supreme power and thus, can be multiple in number. God is generally used in the context of male gods, whereas deity can be used to refer to both god and goddess (female god).</p>
</blockquote>
<p>The following is a quick ten-point summary of the plugin: </p>
<ol>
<li>A player creates an <a href="mech/cults/altars.html">altar</a> in-order to pray to a deity. </li>
<li>If the deity doesn't exist, then a new religion (cult) is formed and that deity is registered, and the player who created the altar becomes the head priest for that cult.</li>
<li>If another player &quot;prays&quot; to that altar and they do not belong to a cult yet, they will join that cult and become a follower of that deity they just prayed to.</li>
<li>A &quot;pantheon&quot; can be created, which is essentially a grouping of different cults/deities together. Members within a cult who are also part of a pantheon can pray to other deities within the pantheon.5. The opposite holds true, and cults can label other cults as &quot;enemies&quot; or &quot;heretics&quot;, making their deities forbidden to their worshippers.</li>
<li>As time goes on and the cult gains more of a following, head priests gain more power and can set laws for their religion, called &quot;canon&quot;.</li>
<li>Canon laws can include things such as what kind of actions are forbidden by their followers, such as food that is forbidden or actions that are encouraged, e.g. killing. </li>
<li>Followers of the cult can lose or gain favor with their god/deity.</li>
<li>Head priests can appoint fellow worshipers as priests.</li>
<li>Head priests and priests can pray to their deity for &quot;miracles&quot; or to place &quot;curses&quot;.</li>
</ol>
<p>This summary, although crude, is the simplest explanation of the plugin and how it functions. A more in-depth explanation of how the plugin works under the <a href="mech/cults.html#basic-usage">Basic Usage</a> section below.</p>
<p>For a better understanding, start reading from <a href="mech/cults/objects.html">this</a> page to be able to visualize the internal object classes:&gt; See <a href="mech/cults/objects.html">Objects</a>.</p>
<h2 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h2>
<p>To create a <code>Cult</code>, one must first build an <code>Altar</code>. Upon right-clicking the sign, the plugin uses a regex search to make sure that the deity being attempted does not match an existing <code>Deity</code> from the database. If the name is too similar or the deity already exists, it will return an error letting the user know what happened.</p>
<p>If the cult is successfully created, then the <code>Believer</code> (or Player) who created the cult automatically becomes the <code>Head Priest</code>. Others can join the cult by &quot;praying&quot; at either a <code>Shrine</code> or the altar. The head priest can promote these other believers to become priests. The <code>Priest</code> and the head priest can perform prayers at the altar to grant blessings upon their cult or curses against a group of people.</p>
<p>In order to perform these rituals, a good rapport must be built with the deity. To become on good terms with the deity, the cult's believers must &quot;pray&quot; to the Deity (right-click the sign) at shrines or altars. As their relationship with the deity improves, the head priest can start to put together a <code>Holy Book</code>. </p>
<p>The holy book is a set of &quot;laws&quot; known as <code>Canon</code> which are determined through a series of random pre-generated questions that the deity will ask the head priest. The answers given will shape the type of deity for that cult and will define what actions to take that allows a believer to either gain or lose favour.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>⚠️ <strong>Warning:</strong> This page is still under construction!</p>
</blockquote>
<h1 id="objects"><a class="header" href="#objects">Objects</a></h1>
<p>This page details and outlines the object classes in the plugin, attempting to give a detailed explanation of their functionality, both from a programming perspective and an in-game perspective.</p>
<h2 id="object-hierarchy"><a class="header" href="#object-hierarchy">Object Hierarchy</a></h2>
<blockquote>
<p>📝 <strong>Note:</strong> This diagram is mainly just a placeholder for now but should give the general sense of the object-class hierarchy.</p>
</blockquote>
<pre><code>          ┌────────┐
          │Nameable│
          └───┬────┘
              │
              │
              ▼
         ┌───────────┐
         │CultsObject│
         ├───────────┤
         ├──────────┼┴───────────┐
         │          │            │
         │          │            │
         │          ▼            │
         │        ┌────┐         │
         │        │Cult│         │
         │        └────┘         │
         │         ▲ ▲           │
         ▼         │ │           ▼
   ┌────────┐      │ │        ┌─────┐
   │Believer├───┬──┘ └────────┤Deity│
┌──┴────────┴───┤             └─────┘
│               │
│  Believer     │
│               │
│  Head Priest  │
│               │
│  Priest       │
│               │
└───────────────┘
</code></pre>
<h3 id="nameable"><a class="header" href="#nameable">Nameable</a></h3>
<p>A simple interface to show that a class can be named, agnostic if it's a <code>CultsObject</code> or not.</p>
<pre><code class="language-java">public interface Nameable {
    /**
     * Get the name of the specified object
     * @return A String representing the name of the object.
     */
    String getName();

    /**
     * Gets the formatted name of the object.
     * @return The formatted name.
     */
    default String getFormattedName() {
        return getName().replace('_', ' ');
    }
}
</code></pre>
<h3 id="cultsobject"><a class="header" href="#cultsobject">CultsObject</a></h3>
<p>The <code>CultsObject</code> class is the main class that implements <code>Nameable</code>, all other object classes should extend this one.</p>
<pre><code class="language-java">public abstract class CultsObject implements Nameable {

    String name;
    UUID id;
    protected CultsObject(String name) { 
        this.name = name; 
    }

    public void setName(String name) { 
        this.name = name; 
    }

    public String getName() { 
        return name; 
    }

    public void setId(UUID id) { 
        this.id = id; 
    }

    public UUID getId() { 
        return id; 
    }

    @Override
    public String toString() { 
        return getName(); 
    }
}
</code></pre>
<h3 id="believer"><a class="header" href="#believer">Believer</a></h3>
<p>The <code>Believer</code> class is a simple class that extends <code>CultsObject</code> and its main purpose is to register the player as a &quot;believer&quot; entity.</p>
<pre><code class="language-java">public class Believer extends CultsObject {

    String name;

    protected Believer(String name) { 
        super(name); 
    }

    @Override
    public String getName() { 
        return name; 
    }

    @Override
    public UUID getId() { 
        return super.getId(); 
    }
}
</code></pre>
<h3 id="deity"><a class="header" href="#deity">Deity</a></h3>
<p>The <code>Deity</code> class also extends <code>CultsObject</code>. The purpose of this class is to represent a &quot;deity/god&quot; entity which is created upon interaction with an <code>Altar</code> for the first time. </p>
<h3 id="cult"><a class="header" href="#cult">Cult</a></h3>
<p>Finally, we reach the <code>Cult</code> object. A cult takes a list of <code>Believers</code> as its members, a single <code>Believer</code> as its <code>Head Priest</code> and a single <code>Diety</code> as it's main deity (agnostic of whether it's part of a <code>Pantheon</code> or not). Believers can be promoted to <code>Priest</code>, which functions as a sort of &quot;officer&quot; or moderator of the cult. It also records the coords of its <code>Altar</code> and saves that as its &quot;holy land&quot;.</p>
<h3 id="holy-land"><a class="header" href="#holy-land">Holy Land</a></h3>
<p>The <code>Holy Land</code> is the chunk containing the <code>Altar</code>. This creates a geographical &quot;home&quot; for the cult. This is to help track a series of cult-specific events, such as but not limited to a <code>Sacrafice</code>.</p>
<h3 id="transmutation"><a class="header" href="#transmutation">Transmutation</a></h3>
<blockquote>
<p>See <a href="mech/cults/transmutations.html">Transmutations</a>
<code>Transmutations</code> are a mechanic of the cults system that allows for believers of a cult to recieve &quot;supernatural&quot; powers from being devout worshippers of their deity. This includes various things such as increased strength buff, jump boost, mining speed etc. </p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>⚠️ <strong>Warning:</strong> This page is still under construction!</p>
</blockquote>
<h1 id="altars"><a class="header" href="#altars">Altars</a></h1>
<h2 id="overview-4"><a class="header" href="#overview-4">Overview</a></h2>
<p>Altars are the core of a <code>Cult</code> as they are the only way to create a cult and the only way to perform certain rituals such as <code>Sacrifices</code>. Altars are meant to be kept safe since t he destruction of an <code>Altar</code> triggers a configurable timer that will dissolve the <code>Cult</code> if the <code>Altar</code> is not rebuilt in time.</p>
<p>An altar is defined as a multi-block structure with three (3) main components:</p>
<ol>
<li>The altar block - The central piece to the altar.</li>
<li>The altar sign - The sign attached to the altar. Has <code>[Altar]</code> on the first line. Right clicking it creates the altar and allows the player to pray to the altar.</li>
<li>Candles - Light up as a status indicator to show that the altar is properly registered.</li>
</ol>
<p>Here is an example of an altar:
<img src="mech/cults/../../images/altar_example.png" alt="Example of an Altar" /></p>
<p>Altars are contained within a <code>Holy Site</code> which is the chunk that is defined upon the registration of an altar.</p>
<blockquote>
<p>📝 <strong>Note:</strong> The terms <code>Holy Site</code> and <code>Holy Land</code> may be used interchangeably as they are defined as essentially the same thing. The only difference is that the <code>Site</code> specifically refers to the <code>Altar Block</code> while the <code>Land</code> refers to it's encompassing chunk in general.</p>
</blockquote>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>The altar, as stated previously, serves as a marker for where and when the <code>Cult</code> was registered/formed and is the primary and direct connection between a <code>Believer</code> and a <code>Deity</code>.</p>
<p>Altars have some functionality outside of being &quot;prayer sites&quot; as they can also function similar to the vanilla beacon, giving buffs to believers within a radius of the holy site.</p>
<p>Altars will also give a base modifier when calculating the reputation change of a believer and their respective deity. The current modifier is <code>1.5x</code> but can be upgraded as the cult grows and more unique believers visit the altar.</p>
<p>An <code>Offering</code> is an item that a player &quot;sacrifices&quot; to the altar by right-clicking the altar sign with an item in hand. A configurable list of items with their &quot;value&quot; can be found within the <a href="mech/cults/config.html">config</a>. The plugin makes a distinction between valuable/ desireable items and undesireable items by assigning positive and negative values to the items. These values are then multiplied by whatever modifiers might be in effect in order to calculate the gain or loss of reputation within a transaction.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shrines"><a class="header" href="#shrines">Shrines</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transmutations"><a class="header" href="#transmutations">Transmutations</a></h1>
<p>Transmutations are another aspect of <code>Cults</code> that has been planned (as of 02/10/2023) to add more depth to the system as well as incentivizing participation in the system.</p>
<p>The way transmutations work is by allowing the <code>Cult</code> to be upgraded based on factors such as prayer count and <code>Believer</code> count. This rewards both active cults and large cults and keeping them as independent factors.</p>
<p>Transmutations can be unlocked by only the <code>Head Priest</code> and can only be changed or modified after another succesfful upgrade. Transmutations serve as ways to enhance the player themselves through adding small modifiers to aspects such as but not limited to: </p>
<ul>
<li>Jumpheight</li>
<li>Movement speed</li>
<li>Mining speed</li>
<li>Nightvision</li>
<li>Strength</li>
</ul>
<p>This upgrade system is similar to the vanilla Minecraft's beacon system where modifiers can be selected based on beacon &quot;level&quot;. The same concept is applied here for cults except that the modifiers can only be changed upon successfully levelling the cult.</p>
<p><img src="mech/cults/images/../../../images/beacon_levels.png" alt="Beacon Levels" /> </p>
<!-- <img src="mech/cults/book/images/beacon_levels.png" alt="Beacon Levels" width="400"/> -->
<p>Instead of having players choose what race they want to pick, the “traditional” race system (dwarves, elves, etc) would be replaced with a &quot;transmutation&quot; (alternatively called a transfiguration, the terms can be used interchangeably in this context) mechanic that ties into the cults system. Players can therefore change their “race” by praying to different deities in-order to achieve non-human abilities (think: werewolf, vampire type “races”)</p>
<p>An explanation of how this mechanic could work is outlined below:</p>
<ul>
<li>By changing the subject of worship (deity), players are granted traits that will give them increased player attributes </li>
<li>Traits can be defined by the worshipers / Head priest: 
<ul>
<li>It could be spells (giving player a set of spells to cast depending on who their worship)</li>
<li>Or enhancing player’s capability: faster walk speed, higher jump height, melee damage increase, range damage increase, health increase, regen increase</li>
<li><strong>Special traits</strong>: free frost walker, slows entities that you hit, free fire aspect, fire immunity, regen on hitting an entity, explode on death, see players through walls, natural armor, claws, no fall damage, short teleport</li>
</ul>
</li>
<li>Traits will come at a cost and the worshipers / Head priest will have to pick the drawbacks 
<ul>
<li><strong>Regular drawbacks</strong>: slower walk speed, lower jump height, melee damage decrease, range damage decrease, health decrease, regen decrease</li>
<li><strong>Critical drawbacks</strong>: burning in sunlight, golden sword, holy symbol, carnivore, can only drink blood, weak to fire, aquaphobia, unable to cast magic, intensified/constant hunger, posion weakness, can only eat metal, unable to wear armor, unable to use weapons, unable to move if being stared at, Frigophobia (take damage when snowing or standing on ice/snow)</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="nodes"><a class="header" href="#nodes">Nodes</a></h1>
<p>The nodes system is a claim system that essentially combines aspects of Towny and a plugin called, &quot;Nodes&quot; by <a href="https://github.com/phonon/minecraft-nodes">phonon</a> (See his documentation for it <a href="https://nodes.soy/4-1-territories.html">here</a> for a better overview of what it does, I will be summarizing most of it here). We will be working off the fork by <a href="https://github.com/crusalis/multi-nodes/tree/master/nodes/src/main/kotlin/phonon/nodes">crusallis</a> as it's more updated.</p>
<h2 id="overview-5"><a class="header" href="#overview-5">Overview</a></h2>
<p>The nodes system can be summarized below in seven main points:</p>
<ol>
<li>The map is segmented into pre-created territories which are groups of contiguous Minecraft chunks.</li>
<li>Territories have different resource nodes which provide different resource yields from mining and different rates for farming, animal breeding, etc...</li>
<li>Players form a town which controls territories. Initial territory claims must be connected.</li>
<li>War is capturing territory from another town.</li>
<li>Towns choose 1 territory to be their capital, which cannot be taken until all other territories are captured.</li>
<li>A resource chest can be built in the capital which will periodically spawn some resources dependent on the resource yield for that territory.</li>
<li>A captured territory is occupied and provides resource benefits for the occupier. The occupier has the option to annex territory and add it to their town.</li>
</ol>
<h3 id="how-is-this-better-than-towny"><a class="header" href="#how-is-this-better-than-towny">How is this better than Towny?</a></h3>
<p>Towny doesn't offer much in terms of any resource/economic differentiation between towns, so there's no economy or trade and a lack of justification for waging war. With this resource node system, we aim to change that by giving incentives for players to be strategic about what land they decide to conquer, where they choose to settle, and how they conduct themselves diplomatically (such as by building or breaking trade relations with other nations).</p>
<h2 id="territories"><a class="header" href="#territories">Territories</a></h2>
<p>As opposed to Towny's basic land unit being the &quot;Townblock&quot;, the Node's system uses &quot;Territories&quot;.</p>
<ul>
<li>Territories have unique resources.</li>
<li>Towns have &quot;power&quot;, which are points they spend on claiming territories</li>
<li>Each territory has a different &quot;power&quot; cost that a town must pay in order to claim.</li>
<li>A territory's power cost depends on its size and resources</li>
<li>More players in a town increases the town's power.</li>
<li>Each player's power contribution to their town increases over playtime (to a maximum value)</li>
</ul>
<p>The territories will also have a web editor that hooks into dynmap in order to better map out where the territories should go using JSON objects.</p>
<blockquote>
<p>See <a href="mech/nodes/territories.html">Territories</a></p>
</blockquote>
<h1 id="resource-nodes"><a class="header" href="#resource-nodes">Resource Nodes</a></h1>
<p>Territory resources are defined by <strong>resource nodes</strong>. This allows
unique resources in different regions of the world (to facilitate
trade and economic differentiation). Territories have four main
resource components:</p>
<ul>
<li><strong>Income</strong>: items/blocks given on a periodic income schedule</li>
<li><strong>Ore</strong>: item drop rates when mining stone</li>
<li><strong>Crops</strong>: farm crops that can grow in a region and their growth speed</li>
<li><strong>Animals</strong>: animals that can breed in a region and their breed success rate</li>
</ul>
<p>Territories contain multiple <strong>Resource nodes</strong> which contribute to
the final territory resource components.</p>
<p>Each resource node must have a unique name to identify it (e.g. <strong>wheat</strong> or <strong>iron</strong>).</p>
<h2 id="format"><a class="header" href="#format">Format</a></h2>
<p>Resource nodes are described by JSON objects. Below is an example <strong>with all possible fields.</strong> Only <code>priority</code> and <code>cost</code> are required, other field are all optional. The next sections detail each component.</p>
<pre><code class="language-json">{
    &quot;icon&quot;: &quot;gold_ingot&quot;,
    &quot;priority&quot;: 50,
    &quot;cost&quot;: {
        &quot;scale&quot;: 1.4,
        &quot;constant&quot;: 10
    },

    &quot;income&quot;: {
        &quot;gold_ingot&quot;: 64,
        &quot;wheat&quot;: 32,
        &quot;diamond&quot;: 0.5,
        &quot;spawn_egg_cow&quot;: 1,
        &quot;spawn_egg_sheep&quot;: 0.5
    },
    &quot;ore&quot;: {
        &quot;coal&quot;: 0.5,
        &quot;gold_ore&quot;: [0.2, 2, 4]
    },
    &quot;crops&quot;: {
        &quot;wheat&quot;: 1.0,
        &quot;potato&quot;: 0.5,
        &quot;pumpkin&quot;: 0.8
    },
    &quot;animals&quot;: {
        &quot;sheep&quot;: 1.0,
        &quot;cow&quot;: 1.0,
        &quot;horse&quot;: 0.5
    },

    &quot;income_total_multiplier&quot;: 1.25,
    &quot;income_multiplier&quot;: {
        &quot;diamond&quot;: 1.5,
        &quot;spawn_egg_cow&quot;: 2.0
    },
    &quot;ore_total_multiplier&quot;: 1.25,
    &quot;ore_multiplier&quot;: {
        &quot;gold_ore&quot;: 1.5
    },
    &quot;crops_total_multiplier&quot;: 1.25,
    &quot;crops_multiplier&quot;: {
        &quot;wheat&quot;: 1.5,
        &quot;potato&quot;: 1.5
    },
    &quot;animals_total_multiplier&quot;: 1.25,
    &quot;animals_multiplier&quot;: {
        &quot;cow&quot;: 1.5,
        &quot;horse&quot;: 2.0
    },

    &quot;neighbor_income&quot;: {
        &quot;gold_ingot&quot;: 64,
        &quot;diamond&quot;: 0.5,
        &quot;spawn_egg_cow&quot;: 1,
    },
    &quot;neighbor_ore&quot;: {
        &quot;coal&quot;: 0.5,
        &quot;gold_ore&quot;: [0.2, 2, 4]
    },
    &quot;neighbor_crops&quot;: {
        &quot;wheat&quot;: 1.0,
        &quot;potato&quot;: 0.5,
        &quot;pumpkin&quot;: 0.8
    },
    &quot;neighbor_animals&quot;: {
        &quot;sheep&quot;: 1.0,
        &quot;cow&quot;: 1.0,
        &quot;horse&quot;: 0.5
    },

    &quot;neighbor_income_total_multiplier&quot;: 1.25,
    &quot;neighbor_income_multiplier&quot;: {
        &quot;diamond&quot;: 1.5,
        &quot;spawn_egg_cow&quot;: 2.0
    },
    &quot;neighbor_ore_total_multiplier&quot;: 1.25,
    &quot;neighbor_ore_multiplier&quot;: {
        &quot;gold_ore&quot;: 1.5
    },
    &quot;neighbor_crops_total_multiplier&quot;: 1.25,
    &quot;neighbor_crops_multiplier&quot;: {
        &quot;wheat&quot;: 1.5,
        &quot;potato&quot;: 1.5
    },
    &quot;neighbor_animals_total_multiplier&quot;: 1.25,
    &quot;neighbor_animals_multiplier&quot;: {
        &quot;cow&quot;: 1.5,
        &quot;horse&quot;: 2.0
    }
}
</code></pre>
<p>All Minecraft item names (used in <code>income</code> and <code>ore</code> keys) must be in all
lowercase with spaces replaced by _.</p>
<h3 id="icon"><a class="header" href="#icon">icon</a></h3>
<p><strong>Format</strong>: <code>&quot;icon&quot;: &quot;icon_name&quot;</code></p>
<p>Name of the icon displayed in the dynmap editor. Most icons are Minecraft
item names. Animal icons are in format <code>mob_name</code>, such as <code>mob_cow</code> or <code>mob_sheep</code>.
This has no in-game behavior, this is purely for web editor/viewer.</p>
<h3 id="priority-required"><a class="header" href="#priority-required">priority (required)</a></h3>
<p><strong>Format</strong>: <code>&quot;priority&quot;: Number</code></p>
<p>This is order that resource node properties are applied to a territory.
Lower priority resource nodes are applied first.</p>
<h3 id="cost-required"><a class="header" href="#cost-required">cost (required)</a></h3>
<p><strong>Format 1</strong>: <code>&quot;scale&quot;: Number</code><br />
<strong>Format 2</strong>: <code>&quot;const&quot;: Number</code></p>
<pre><code>&quot;cost&quot;: {
    &quot;scale&quot;: 1.4,
    &quot;constant&quot;: 10
}
</code></pre>
<p>This defines the resource power cost applied to the territory.
<a href="mech/./4-1-territories.html#territory-cost">See territory cost model.</a></p>
<p>&quot;scale&quot; (or <strong>rs</strong>) is the power cost per chunk. &quot;const&quot; (or <strong>rc</strong>) is
the constant power cost for having this resource.</p>
<p><strong>total cost = base + rc + rs * a * chunks</strong></p>
<ul>
<li><strong>base</strong> = base cost</li>
<li><strong>chunks</strong> = size of territory</li>
<li><strong>a</strong> = fixed scale factor per chunk (so larger territories cost more)</li>
<li><strong>rs</strong> = resource scale factor (e.g. shitty resource wheat rs = 1, rare resource diamond rs = 2)</li>
<li><strong>rc</strong> = resource constant factor</li>
</ul>
<p>For territories with multiple resources, <strong>rs</strong> and <strong>rc</strong> are the total
from all resources: <strong>rs = rs1 * rs2 * ...</strong> and <strong>rc = rc1 + rc2 + ...</strong>.</p>
<p>Resource scale factors enforce that a large territory with a rare resource
is more expensive than small territory with same resource</p>
<h3 id="income"><a class="header" href="#income">income</a></h3>
<p><strong>Format 1</strong>: <code>&quot;item_name&quot;: amount</code><br />
<strong>Format 2</strong>: <code>&quot;spawn_egg_monster&quot;: amount</code></p>
<pre><code>&quot;income&quot;: {
    &quot;gold_ingot&quot;: 64,
    &quot;spawn_egg_cow&quot;: 1
}
</code></pre>
<p>These define items/blocks given to towns during every income cycle
(found in town income chest using <code>/town income</code>). Each <code>item_name</code> is a
normal Minecraft item name. To give spawn eggs, the name must be
<code>&quot;spawn_egg_monster&quot;</code> (e.g. <code>&quot;spawn_egg_sheep&quot;</code>).</p>
<p>The amount can either be a <code>Double</code> &lt;1.0 or <code>Integer</code> &gt;1, with following effects on income:</p>
<ul>
<li><strong>Amount &lt;1.0</strong>: Performs a random roll, gives 1 item if <code>random() &lt; amount</code></li>
<li><strong>Amount &gt;1.0</strong>: Gives the amount as an integer (casts to <code>Integer</code>)</li>
</ul>
<p>For occupation taxes, fractional amounts given to the occupier
are always rounded up using <code>Math.ceil()</code>.
So if the income amount &lt;= 1, for taxes it will always go to the occupier.</p>
<h3 id="ore"><a class="header" href="#ore">ore</a></h3>
<p><strong>Format 1</strong>: <code>&quot;item_name&quot;: drop_rate</code><br />
<strong>Format 2</strong>: <code>&quot;item_name&quot;: [drop_rate, min_amount, max_amount]</code></p>
<pre><code>&quot;ore&quot;: {
    &quot;coal&quot;: 0.5,
    &quot;gold_ore&quot;: [0.2, 2, 4]
}
</code></pre>
<p>These define probabilities for items to drop when mining stone or
other blocks set in config (often referred to as
<a href="https://github.com/DevotedMC/HiddenOre">&quot;hidden ore&quot;</a>). </p>
<p><code>drop_rate</code> is the probability that the item will drop. <code>min_amount</code>
and <code>max_amount</code> are the min and max items that drop when the event
triggers. The shorthand Format 1 <code>&quot;item_name&quot;: drop_rate</code> defaults
both <code>min_amount = max_amount = 1</code>.</p>
<h3 id="crops-1"><a class="header" href="#crops-1">crops</a></h3>
<p><strong>Format</strong>: <code>&quot;crop_type&quot;: growth_rate</code></p>
<pre><code>&quot;crops&quot;: {
    &quot;wheat&quot;: 1.0,
    &quot;potato&quot;: 0.5
}
</code></pre>
<p>By default, no crops will grow in a territory without adding specific crops
here. An entry here enables crops of that type to grow. The <code>growth_rate</code> sets
the probability the crop will grow during normal crop tick. Setting
<code>growth_rate = 1.0</code> means normal growth rate. Setting <code>&lt; 1.0</code> means
crops will grow slower.</p>
<p>Crops can be any growable block, e.g. wheat, sugar cane, pumpkin, melon, cactus, etc...</p>
<h3 id="animals"><a class="header" href="#animals">animals</a></h3>
<p><strong>Format</strong>: <code>&quot;animal_type&quot;: breed_success_rate</code></p>
<pre><code>&quot;animals&quot;: {
    &quot;sheep&quot;: 1.0,
    &quot;horse&quot;: 0.5
}
</code></pre>
<p>By default, when animals breed, there will be no child in territories without
animal settings here. An entry here enables animals of that type to breed.
The <code>breed_success_rate</code> sets the probability that a child will be created.
Setting <code>breed_success_rate = 1.0</code> means normal breeding. Setting <code>&lt; 1.0</code> means
some breed events will fail to produce offspring.</p>
<h3 id="income_total_multiplier"><a class="header" href="#income_total_multiplier">income_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;income_total_multiplier&quot;: Number</code></p>
<p>Multiplies all territory income values by this number.</p>
<h3 id="income_multiplier"><a class="header" href="#income_multiplier">income_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;item_name&quot;: Number</code></p>
<pre><code>&quot;income_multiplier&quot;: {
    &quot;diamond&quot;: 1.5,
    &quot;iron_ore&quot;: 1.2
}
</code></pre>
<p>Multiplies specific territory income items by value specified.
e.g. above, <code>diamond</code> income gets 1.5x multiplier, <code>iron_ore</code> income
gets 1.2x multiplier.</p>
<h3 id="ore_total_multiplier"><a class="header" href="#ore_total_multiplier">ore_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;ore_total_multiplier&quot;: Number</code></p>
<p>Multiplies all territory hidden ore drop probability by this number.</p>
<h3 id="ore_multiplier"><a class="header" href="#ore_multiplier">ore_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;item_name&quot;: Number</code></p>
<pre><code>&quot;ore_multiplier&quot;: {
    &quot;gold_ore&quot;: 1.5,
    &quot;coal&quot;: 1.25
}
</code></pre>
<p>Multiplies specific territory hidden ore drop probability by value specified.
e.g. above, <code>gold_ore</code> probability gets 1.5x multiplier, <code>coal</code> probability
gets 1.25x multiplier. <strong>This does not affect min/max item drop count.</strong></p>
<h3 id="crops_total_multiplier"><a class="header" href="#crops_total_multiplier">crops_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;crops_total_multiplier&quot;: Number</code></p>
<p>Multiplies all territory crop growth probability by this number.</p>
<h3 id="crops_multiplier"><a class="header" href="#crops_multiplier">crops_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;crop_type&quot;: Number</code></p>
<pre><code>&quot;crops_multiplier&quot;: {
    &quot;wheat&quot;: 1.5,
    &quot;potato&quot;: 1.25
}
</code></pre>
<p>Multiplies specific territory crop growth probability by value specified.
e.g. above, <code>wheat</code> growth probability gets 1.5x multiplier,
<code>potato</code> growth probability gets 1.25x multiplier.</p>
<h3 id="animals_total_multiplier"><a class="header" href="#animals_total_multiplier">animals_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;animals_total_multiplier&quot;: Number</code></p>
<p>Multiplies all territory animal breed success probability by this number.</p>
<h3 id="animals_multiplier"><a class="header" href="#animals_multiplier">animals_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;animal_type&quot;: Number</code></p>
<pre><code>&quot;animals_multiplier&quot;: {
    &quot;cow&quot;: 1.5,
    &quot;horse&quot;: 2.0
}
</code></pre>
<p>Multiplies specific territory animal breed success probability by value specified.
e.g. above, <code>cow</code> breed success probability gets 1.5x multiplier,
<code>horse</code> breed success probability gets 2.0x multiplier.</p>
<h3 id="neighbor_income"><a class="header" href="#neighbor_income">neighbor_income</a></h3>
<p><strong>Format 1</strong>: <code>&quot;item_name&quot;: amount</code><br />
<strong>Format 2</strong>: <code>&quot;spawn_egg_monster&quot;: amount</code></p>
<pre><code>&quot;neighbor_income&quot;: {
    &quot;gold_ingot&quot;: 4,
    &quot;spawn_egg_cow&quot;: 1,
}
</code></pre>
<p>Same format as <code>income</code>, except this adds values to the territory's neighbor
territories (NOT the territory itself).</p>
<h3 id="neighbor_ore"><a class="header" href="#neighbor_ore">neighbor_ore</a></h3>
<p><strong>Format 1</strong>: <code>&quot;item_name&quot;: drop_rate</code><br />
<strong>Format 2</strong>: <code>&quot;item_name&quot;: [drop_rate, min_amount, max_amount]</code></p>
<pre><code>&quot;neighbor_ore&quot;: {
    &quot;coal&quot;: 0.5,
    &quot;gold_ore&quot;: [0.2, 2, 4]
}
</code></pre>
<p>Same format as <code>ore</code>, except this adds values to the territory's neighbor
territories (NOT the territory itself).</p>
<h3 id="neighbor_crops"><a class="header" href="#neighbor_crops">neighbor_crops</a></h3>
<p><strong>Format</strong>: <code>&quot;crop_type&quot;: growth_rate</code></p>
<pre><code>&quot;neighbor_crops&quot;: {
    &quot;wheat&quot;: 0.5,
    &quot;potato&quot;: 0.5
}
</code></pre>
<p>Same format as <code>crops</code>, except this adds values to the territory's neighbor
territories (NOT the territory itself).</p>
<h3 id="neighbor_animals"><a class="header" href="#neighbor_animals">neighbor_animals</a></h3>
<p><strong>Format</strong>: <code>&quot;animal_type&quot;: breed_success_rate</code></p>
<pre><code>&quot;neighbor_animals&quot;: {
    &quot;sheep&quot;: 1.0,
    &quot;horse&quot;: 0.5
}
</code></pre>
<p>Same format as <code>animals</code>, except this adds values to the territory's neighbor
territories (NOT the territory itself).</p>
<h3 id="neighbor_income_total_multiplier"><a class="header" href="#neighbor_income_total_multiplier">neighbor_income_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;neighbor_income_total_multiplier&quot;: Number</code></p>
<p>Multiplies all neighbor territory income values by this number.
Only affects neighbor, NOT territory itself.</p>
<h3 id="neighbor_income_multiplier"><a class="header" href="#neighbor_income_multiplier">neighbor_income_multiplier</a></h3>
<pre><code>&quot;neighbor_income_multiplier&quot;: {
    &quot;diamond&quot;: 1.5,
    &quot;spawn_egg_cow&quot;: 2.0
}
</code></pre>
<p>Multiplies specific neighbor territory income items by value specified.
Same as <code>income_multiplier</code> except applies to neighbor territories, NOT
the territory itself.</p>
<h3 id="neighbor_ore_total_multiplier"><a class="header" href="#neighbor_ore_total_multiplier">neighbor_ore_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;neighbor_ore_total_multiplier&quot;: Number</code></p>
<p>Multiplies all neighbor territory hidden ore drop probability by this number.
Only affects neighbor, NOT territory itself.</p>
<h3 id="neighbor_ore_multiplier"><a class="header" href="#neighbor_ore_multiplier">neighbor_ore_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;item_name&quot;: Number</code></p>
<pre><code>&quot;neighbor_ore_multiplier&quot;: {
    &quot;gold_ore&quot;: 1.5,
    &quot;coal&quot;: 1.25
}
</code></pre>
<p>Multiplies specific neighbor territory hidden ore drop probability by
value specified. Same as <code>ore_multiplier</code> except applies to neighbor
territories, NOT the territory itself. Only affects probability,
not item drop min/max count.</p>
<h3 id="neighbor_crops_total_multiplier"><a class="header" href="#neighbor_crops_total_multiplier">neighbor_crops_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;neighbor_crops_total_multiplier&quot;: Number</code></p>
<p>Multiplies all neighbor territory crop growth probability by this number.
Only affects neighbor, NOT territory itself.</p>
<h3 id="neighbor_crops_multiplier"><a class="header" href="#neighbor_crops_multiplier">neighbor_crops_multiplier</a></h3>
<pre><code>&quot;neighbor_crops_multiplier&quot;: {
    &quot;wheat&quot;: 1.5,
    &quot;potato&quot;: 1.5
}
</code></pre>
<p>Multiplies specific neighbor territory crops growth probability by value.
Same as <code>crops_multiplier</code> except applies to neighbor territories, NOT
the territory itself.</p>
<h3 id="neighbor_animals_total_multiplier"><a class="header" href="#neighbor_animals_total_multiplier">neighbor_animals_total_multiplier</a></h3>
<p><strong>Format</strong>: <code>&quot;neighbor_animals_total_multiplier&quot;: Number</code></p>
<p>Multiplies all neighbor territory animal breed success probability by this number.
Only affects neighbor, NOT territory itself.</p>
<h3 id="neighbor_animals_multiplier"><a class="header" href="#neighbor_animals_multiplier">neighbor_animals_multiplier</a></h3>
<pre><code>&quot;neighbor_animals_multiplier&quot;: {
    &quot;cow&quot;: 1.5,
    &quot;horse&quot;: 2.0
}
</code></pre>
<p>Multiplies specific neighbor territory animal breed success probability
by value specified. Same as <code>animals_multiplier</code> except applies to neighbor
territories, NOT the territory itself.</p>
<h2 id="intended-usage"><a class="header" href="#intended-usage">Intended Usage</a></h2>
<p>Resource nodes are intended as <em>composable units.</em> This means that instead
of making very specific resource nodes for each territory, it's best to make
generic nodes such as a <strong>wheat</strong>, <strong>coal</strong>, <strong>horses</strong>, or <strong>iron</strong> and attach
them to many different territories. Territories are intended to have multiple
resource nodes. Examples of intended usage:</p>
<ul>
<li><strong>Agriculture territory</strong>: this could have <strong>wheat</strong>, <strong>potato</strong> and <strong>sheep</strong> nodes</li>
<li><strong>Iron territory</strong>: this could have an <strong>iron</strong> node</li>
<li><strong>Mongolian horse steppe</strong>: this could have a <strong>horses</strong> nodes</li>
<li><strong>Coal-rich territory</strong>: because resource node names are unique, have several coal nodes: <strong>coal</strong>, <strong>coal2</strong>, <strong>coal3</strong> with similar properties attached to this territory (can have <strong>coal</strong> and <strong>coal2</strong> set ore mining rates while <strong>coal3</strong> simply provides additional fixed income)</li>
</ul>
<h2 id="combined-resource-node-rate-calculations"><a class="header" href="#combined-resource-node-rate-calculations">Combined Resource Node Rate Calculations</a></h2>
<ul>
<li>Rates for the same property are summed together.</li>
<li>Properties are added together sequentially in order of priority (low to high)</li>
<li>Multipliers are applied to properties that exist when it is
applied. So in general, make resource nodes with multipliers separate
and with higher priority value.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code>resources = {
    &quot;iron&quot;: {
        &quot;priority&quot;: 0,
        &quot;ore&quot;: { &quot;iron_ore&quot;: 0.5 }
    },
    &quot;gold&quot;: {
        &quot;priority&quot;: 0,
        &quot;ore&quot;: { &quot;gold_ore&quot;: 0.5 }
    },
    &quot;diamond&quot;: {
        &quot;priority&quot;: 100,
        &quot;ore:&quot; { &quot;diamond_ore&quot;: 0.5 }
    },
    &quot;bonus_ore&quot;: {
        &quot;priority&quot;: 50,
        &quot;ore_total_multiplier&quot;: 1.5
    }
}
</code></pre>
<p>The sorted order will be <code>[&quot;iron&quot;, &quot;gold&quot;, &quot;bonus_ore&quot;, &quot;diamond&quot;]</code>
(from sorting by priority low to high). The territory resources is
calculated as:</p>
<ol>
<li>Apply &quot;iron&quot;:</li>
</ol>
<pre><code>resources = {
    ore = {
        iron_ore: 0.5,
    }
}
</code></pre>
<ol start="2">
<li>Apply &quot;gold&quot;:</li>
</ol>
<pre><code>resources = {
    ore = {
        iron_ore: 0.5,
        gold_ore: 0.5,
    }
}
</code></pre>
<ol start="3">
<li>Apply &quot;bonus_ore&quot; (1.5x multipler on all ore):</li>
</ol>
<pre><code>resources = {
    ore = {
        iron_ore: 0.75,
        gold_ore: 0.75,
    }
}
</code></pre>
<ol start="4">
<li>Apply &quot;diamond&quot;:</li>
</ol>
<pre><code>resources = {
    ore = {
        iron_ore: 0.75,
        gold_ore: 0.75,
        diamond_ore: 0.5,
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="territories-1"><a class="header" href="#territories-1">Territories</a></h1>
<p>Territories are the core unit in Nodes. These are a group of
chunks with some &quot;resource&quot; properties attached. Territories
also form a graph with adjacent territories. Below is a simplified
high-level example of a territory. <strong>This design document describes
how territories and resources are loaded and created in the Nodes engine.</strong></p>
<pre><code class="language-json">Territory {
    // fixed structural properties
    id: 420,
    chunks: [(x0, z0), (x1, z1), (x2, z2)]
    neighbors: [TerritoryId(69), TerritoryId(9000)]

    // resource properties
    resources: [&quot;town&quot;, &quot;diamond&quot;]
    income: [DIAMOND],
    crops: [WHEAT, CARROT]
    animals: [PIG]
    ore: [DIAMOND, GOLD]
    customProperties: {
        manpower: 5,
    }
}
</code></pre>
<p><strong>Properties:</strong></p>
<ul>
<li>Territory is a set of chunks. Chunks must map to a single territory.
<strong>No territories should share chunks.</strong></li>
<li>Territories form a graph with edges between territories bordering
each other. The <code>neighbors</code> objects contains just territory ids
to avoid territory pointer graph dependencies. This makes it easier
to swap in / recreate territory objects on the fly (so long as overall
world territory graph unchanged).</li>
<li>Territory fixed and resource properties should be immutable after
territory is created. If these need to change, create a new Territory
object.</li>
<li>Territory resource properties are &quot;fixed function&quot;: these are hard-coded
properties for the most common game behaviors.</li>
<li>External addons can add additional functionality using the
<code>customProperties: Map&lt;String, Any&gt;</code>.</li>
</ul>
<h2 id="territory-creation-process"><a class="header" href="#territory-creation-process">Territory creation process</a></h2>
<p>Territory creation/initialization itself can be expensive (due to
creating potentially expensive data structures during initialization).
Our goals:</p>
<ul>
<li>Territory created is immutable</li>
<li>Multiple passes of resource node modification by main plugin
and external addon plugins before creating final ResourceNode.</li>
<li>Territory resource graph neighbor-neighbor interactions.
(e.g. neighbor bonuses).</li>
</ul>
<pre><code>           [world.json]
                |_____________________________________
                |                                    |
                v                                    v
           Territories                           Resources
              Json                                 Json
                |____________________                |
                |                   |                |
                v                   v                |
    territoriesToBuild:      territoryResources:     |
    Map&lt;Id, FixedProperties&gt;  Map&lt;Id, List&lt;String&gt;&gt;  |
                |                   |           _____v______
                |                   |           | Default  |
                |                   |           | Resource |
                |                   |           |  Loader  |
                |                   |           |__________|
                |                   |                |
                |                   |           _____v______
                |                   |           | External | (Can be
                |                   |           | Resource |  multiple
                |                   |           |  Loaders |  external
                |                   |           |__________|  loaders)
                |                   |                |
                |                   |               ...
                |                   |                |
                |                   |                v
                |                   |   resources: Map&lt;String, ResourceNode&gt;
                |                   |                |
                |                   |                |
                |            _______v_________       |
                |           | Build Territory |      |
                |           | Resource Graph  |&lt;-----|
                |           |_________________|
                |                   |
                |                   v
                |             resourceGraph:
                |            Map&lt;Id, Resources&gt;
                |                   |
                |            _______v_________
                |           | Graph           | (e.g. neighbor-neighbor
                |----------&gt;| Message passing |  modifiers)
                |           |_________________|
                |                   |
                |                   v
                |           finalResourceGraph:
                |           Map&lt;Id, Resources&gt;
                |                   |
                |        ___________v_________________________
                |       | Combine territory fixed properties | 
                |------&gt;| and resources and compile          | 
                        |____________________________________|
                                    |
                                    v
                                territories:
                             Map&lt;Id, Territory&gt;
</code></pre>
<h2 id="territory-resources-compilation"><a class="header" href="#territory-resources-compilation">Territory Resources Compilation</a></h2>
<p><strong>Resources are groups of &quot;attribute&quot; functions: <code>A(T) -&gt; T</code></strong></p>
<p>Resource nodes are composed of a list of <code>ResourceAttribute</code> interface 
objects. These are functions applied to a <code>TerritoryResources</code> to create a
new <code>TerritoryResources</code> (e.g. to add resources, or apply modifiers).</p>
<pre><code>TerritoryResources {
    income: List&lt;Item&gt;,
    crops: List&lt;Crop&gt;
    animals: List&lt;Animal&gt;,
    ore: List&lt;Item&gt;,
    customProperties: Map&lt;String, Any&gt;,
}

ResourceAttribute {
    apply(t: TerritoryResources) -&gt; TerritoryResources
}

ResourceNode {
    attributes: List&lt;ResourceAttribute&gt;
    priority: 69
}
</code></pre>
<p>A single <code>TerritoryResources</code>'s &quot;compilation&quot; process is shown below:</p>
<ol>
<li>Start with a blank <code>TerritoryResources</code> (or default properties).</li>
<li>Sort a list of resource nodes by priority (e.g. so that modifiers like bonus
ore percent is applied after base ore rates are added).</li>
<li>Foreach resource node, foreach attribute, apply the attribute function
to the <code>TerritoryResources</code>.</li>
</ol>
<pre><code>t = TerritoryResources.default()

resources = [
    ResourceNode { [BonusOreAttribute], priority: 69 },
    ResourceNode { [IncomeAttribute, OreAttribute], priority: 0 },
]

for r in sort(resources, key = resource.priority()):
    for attribute in r.attributes:
        t = t.apply(attribute)
</code></pre>
<h2 id="resource-attribute-priority"><a class="header" href="#resource-attribute-priority">Resource Attribute Priority</a></h2>
<p>Default in nodes plugin:</p>
<ul>
<li><strong>Regular properties (income, crops, ore, etc.):</strong> 0</li>
<li><strong>Bonus modifiers (+10% income, +10% ore, etc.):</strong> 50</li>
<li><strong>Neighbor modifiers (+10% neighbor ore, etc.):</strong> 100</li>
</ul>
<h2 id="resource-loaders-and-addons"><a class="header" href="#resource-loaders-and-addons">Resource Loaders and Addons</a></h2>
<p><code>ResourceLoader</code> interface loads json resource object tree into
resource attributes. Intermediate <code>ResourceBuilder</code> state is passed
through all loader systems before finishing compiling into
immutable <code>ResourceNode</code> object definitions.</p>
<pre><code>ResourceBuilder {
    attributes: List&lt;ResourceAttribute&gt;

    build() -&gt; ResourceNode
}

ResourceBuilderLibrary {
    resources: Map&lt;String, ResourceBuilder&gt;

    build() -&gt; Map&lt;String, ResourceNode&gt;
}

ResourceLoader {
    apply(resources: ResourceBuilderLibrary, json: Json) -&gt; ResourceBuilderLibrary
}

// load resources
loaders: List&lt;ResourceLoader&gt; = [
    ResourceLoaderBuiltin,
    ResourceLoaderAddon1,
    ResourceLoaderAddon2,
]

jsonResourceLibrary = loadJsonResourceSection(&quot;world.json&quot;)

resourcesToBuild = ResourceBuilderLibrary()

for resourceLoader in loaders:
    resourcesToBuild = resourceLoader.apply(resourcesToBuild, jsonResourceLibrary)

resources = resourcesToBuild.build()
</code></pre>
<h2 id="external-resource-loader-jar-files"><a class="header" href="#external-resource-loader-jar-files">External Resource Loader <code>.jar</code> Files</a></h2>
<p>This system must support loading <code>ResourceLoader</code> objects from
other <code>.jar</code> files in <code>nodes/addons/resources</code>. This allow external
addons to write custom resources (e.g. resources with more customized
behavior or that modify territory <code>customProperites</code>).</p>
<h2 id="reloading-resourcesterritories"><a class="header" href="#reloading-resourcesterritories">Reloading Resources/Territories</a></h2>
<ul>
<li>Reloading resources requires repeating resource loader steps and all
territory re-calculations. <strong>This is expensive (full map re-calculation).</strong></li>
<li>Reloading territories requires re-calculating a territory, then
recalculating all neighbors (to propagate neighbor bonuses).
<strong>This requires recalculating Territory resources for reloaded territories,
neighbors, AND neighbors' neighbors (two edges away).</strong> This is to make
sure neighbors' neighbors modifiers are all calculated. But only direct
neighbors would be updated in this process.</li>
</ul>
<h2 id="why-no-territoryattribute"><a class="header" href="#why-no-territoryattribute">Why No <code>TerritoryAttribute</code>?</a></h2>
<p>Currently territories are fixed functionality with an additional 
<code>customProperties&lt;String, Any&gt;</code> map for implementing external features:</p>
<pre><code>Territory {
    income: [DIAMOND],
    crops: [WHEAT, CARROT]
    animals: [PIG]
    ore: [DIAMOND, GOLD]
    customProperties: {
        manpower: 5,
    }
}
</code></pre>
<p>An alternative would be to decompose territory resource properties as
a set of <code>TerritoryAttribute</code> properites, similar to resources.
The territory above would become:</p>
<pre><code>Territory {
    attributes: [
        IncomeAttribute { [DIAMOND] }
        CropsAttribute { [WHEAT, CARROT] },
        AnimalsAttribute { [PIG] },
        OresAttribute { [DIAMOND, GOLD] },
        ManpowerAttribute { 5 },
    ]
}
</code></pre>
<p>While this is more flexible, it incurs more development and runtime cost for checking which attributes exist in a territory. For my targeted use case, the majority of required territory functionality is just income, crops, animals, and ore. The flexibility in the above &quot;Entity-Component&quot; style of territory did not seem worth it.</p>
<h3 id="fixed-function-territories"><a class="header" href="#fixed-function-territories"><strong>Fixed Function Territories:</strong></a></h3>
<p><strong>Pros:</strong></p>
<ul>
<li>Development easier for main use cases (less checks for
attribute existence).</li>
<li>Less runtime cost for checking attribute existence in
main use cases.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>External addons must share a <code>customProperties&lt;String, Any&gt;</code>
which can be annoying to use and unsafe.</li>
</ul>
<h3 id="attribute-based-territories"><a class="header" href="#attribute-based-territories"><strong>Attribute Based Territories:</strong></a></h3>
<p><strong>Pros:</strong></p>
<ul>
<li>Well defined territory API, allows more external addon
flexibility.</li>
<li>Lower memory usage: most territories do not need data
structures for all functionalities.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Runtime and development cost for checking which attributes
exist in territories.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prefer-handlesids-over-references"><a class="header" href="#prefer-handlesids-over-references">Prefer Handles/IDs over References</a></h1>
<blockquote>
<p><strong>tl;dr prefer storing handles like <code>TerritoryId</code> instead of direct
<code>Territory</code> pointer references. Avoid forming pointer dependencies.</strong></p>
</blockquote>
<h2 id="problem-cancerous-dependency-web"><a class="header" href="#problem-cancerous-dependency-web">Problem: Cancerous dependency web</a></h2>
<p>Territories in particular are intended to be swapped out in real-time in order to easily modify resource attributes, e.g. Players build structures in their territory that reward new resource nodes.</p>
<p>To handle swapping out or modifying territories we have two options:</p>
<ol>
<li><strong>Make territories fully mutable, modify or re-build resource
properties in real time.</strong>
<ul>
<li><strong>Pros:</strong> &quot;Non-invasive&quot;. Pointer stability.</li>
<li><strong>Cons:</strong> Need to enforce that only certain systems actually modify.
Can potentially become difficult to enforce.</li>
</ul>
</li>
<li><strong>Keep territories mostly immutable. Re-create entire territory
when resources need to be updated.</strong>
<ul>
<li><strong>Pros:</strong> Systems cannot modify territory properties.
Easier to reduce surface area for unknown state modifications
(not guaranteed, but easier). References to object have
stable properties (though not critical since codebase is
currently single-threaded).</li>
<li><strong>Cons:</strong> Re-creating objects requires updating all pointer
dependencies in other objects. More difficult to enforce
memory safety.</li>
</ul>
</li>
</ol>
<p>We opt for the 2nd option of mainly immutable objects and re-creating the object when properties need to change. This architecture, however, makes holding direct references difficult, since all these need to be updated when the object is re-created. This creates a bigger surface area for memory leaks:</p>
<pre><code>Town {
    capital: Territory
    territories: ArrayList&lt;Territory&gt;
}

Territory {
    owner: Town
    neighbors: List&lt;Territory&gt;
}
</code></pre>
<p>If a territory is swapped out, all references to the old <code>Territory</code> object must be replaced with the <code>Town</code> and <code>Territory</code>. The alternative representation is the central storage of objects while enforcing only handle references:</p>
<pre><code>TownId = int

Town {
    capital: TerritoryId
    territories: ArrayList&lt;TerritoryId&gt;
}

TerritoryId = int

Territory {
    owner: TownId
    neighbors: List&lt;TerritoryId&gt;
}

// central storages
towns = Map&lt;TownId, Town&gt;
territories = Map&lt;TerritoryId, Territory&gt;
</code></pre>
<h2 id="handles-over-pointers"><a class="header" href="#handles-over-pointers">Handles over Pointers</a></h2>
<ul>
<li><strong>Pointer stability through indirection.</strong> This adds a layer of 
indirection to provide pointer stability. A territory can be
swapped in without affecting any other state since all
access must use the central storage. This assumes overall world
structure is unchanged and ids remain the same. Client must
ensure these invariants are upheld.</li>
<li><strong>Additional indirection cost.</strong> However, indirection adds
a map lookup to get the underlying object. This may not be
great in a hot path. Need to profile/benchmark if this
becomes a concern. Likely not an issue since Nodes does not
run big tasks each server tick.</li>
</ul>
<h2 id="when-handles"><a class="header" href="#when-handles">When Handles</a></h2>
<p>Prefer handles for</p>
<ul>
<li>Long lived storage with interlocked dependencies (e.g. Town-Territory
object dependencies). In this case, Territories are intended to be
re-created in real time, while Towns are not, so use TerritoryId,
but TownId not as necessary.</li>
</ul>
<p>Ok direct references:</p>
<ul>
<li>Hot paths (getting Territory from TerritoryChunk, very common)</li>
<li>Short lived objects that are not stored (e.g. events)</li>
</ul>
<h2 id="type-safe-handles"><a class="header" href="#type-safe-handles">Type safe handles</a></h2>
<blockquote>
<p>📝 <strong>Note</strong>: This section is deprecated as we are moving back to JDK in-order to keep uniformity for collaboration sake.</p>
</blockquote>
<p>Kotlin allows type safe wrappers around basic identifiers with <a href="https://kotlinlang.org/docs/inline-classes.html">value
classes</a>:</p>
<pre><code class="language-kotlin">@JvmInline
value class TerritoryId(private val id: Int)
</code></pre>
<ul>
<li><a href="https://kotlinlang.org/docs/inline-classes.html">https://kotlinlang.org/docs/inline-classes.html</a></li>
<li><a href="https://typealias.com/guides/inline-classes-and-autoboxing/">https://typealias.com/guides/inline-classes-and-autoboxing/</a></li>
</ul>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<p><a href="https://floooh.github.io/2018/06/17/handles-vs-pointers.html">https://floooh.github.io/2018/06/17/handles-vs-pointers.html</a></p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="claiming-system"><a class="header" href="#claiming-system">Claiming System</a></h1>
<p>The claiming system, as mentioned in the <a href="mech/nodes/nodes.html">Nodes</a> page, will be essentially a fork of <a href="https://github.com/TownyAdvanced/Towny">Towny</a> with a few elements from other plugins.</p>
<p>If you are not familiar with Towny, then to put it simply, it is one of those claim management plugins that allows players to claim land that other players can not access, break or modify and also allows players to invite other players to a “group” that has access to said land so that way only people within the group can use that land.</p>
<p>In vanilla Towny, there exists something called “Objects”. Objects can be defined as one of a few things, and follow a hierarchy:</p>
<ol>
<li>Resident (Player) - The lowest level of object.</li>
<li>Town (Group of players, lead by a “mayor”)</li>
<li>Plot (Chunk that is owned by a resident or Town)</li>
<li>Nation (Group of towns, led by a “king”, all towns within a nation can modify other towns within the same nation. Nations can ally and enemy each other and wage war with one another)</li>
</ol>
<blockquote>
<p>Developer Note: See <a href="https://github.com/TownyAdvanced/Towny/blob/master/src/com/palmergames/bukkit/towny/object/TownyObject.java">TownyObject.java</a></p>
</blockquote>
<p>Our claiming system plans to expand on Towny by using it as a base template and combine it with a system such as <a href="mech/nodes/nodes.html">nodes</a> and integrate it with our <a href="mech/nodes/economy.html">economy</a> and the <a href="mech/nodes/cults.html">cults</a> system.</p>
<h2 id="why-other-systems-kinda-suck"><a class="header" href="#why-other-systems-kinda-suck">Why other systems kinda suck:</a></h2>
<p>Factions were just straight-up never good for these kinds of servers.</p>
<p>Towns put too much focus on the &quot;home block&quot;, or the capital, of their towns (the basic land-claiming unit). So an entire nation has its heart in a single chunk that is 9 out of 10 times the town that created the nation in the first place. To move the capital of the entire nation, say to somewhere more strategic, you would have to give up ownership of the town to make another town the &quot;capital&quot; and, therefore, have that mayor (the person who is in charge of the town) be king.</p>
<p>In pretty much all of Towny's warfare systems, if you take out the home block you win the war.</p>
<p>In Towny, wars are either too fast (the flag-war system, the attrition system which was kill-based) or wayyyy too slow (Modern Siege System).</p>
<p>The bright side of Towny is that it's constantly being updated by competent developers, and those developers are also very helpful when it comes to adding new features using their API and will sometimes even lend a hand in development.</p>
<p>I believe that Towny is a good base for our new hybrid claims system on this basis. Not to mention, it already has the basic object hierarchy structure that we can work off of. I believe <a href="https://github.com/crusalis/multi-nodes">phonon's nodes</a> would not be an acceptable base for our fork as it is way too bare bones compared to Towny and removes necessary features that we can use to expand off of, such as the different <code>plot-types</code> built in the Towny API. Not to mention that the source for phonon's nodes is written in Kotlin which will make collaboration significantly harder as it's currently not a widely accepted language standard for plugin development. </p>
<h2 id="why-the-fork-is-necessary"><a class="header" href="#why-the-fork-is-necessary">Why the fork is necessary:</a></h2>
<p>Forking Towny is necessary as it plans to offer better implementation of certain gameplay features that vanilla base Towny can't offer as it would be too niche for them to consider. Features such as:</p>
<ul>
<li>Direct support and integration of the proposed <a href="mech/nodes/nodes.html">nodes</a> system.</li>
<li>Integration for the <a href="mech/nodes/cults.html">cults</a> mechanic.</li>
<li>Better integration with Movecraft.</li>
<li>Direct integration for proposed <a href="mech/nodes/npc.html">NPC</a> mechanics such as: 
<ul>
<li>Spawning of <a href="mech/nodes/npcs/types/soldier.html">soldiers</a>.</li>
<li>Implementation of proposed mechanics of NPC nations.</li>
</ul>
</li>
<li>Better <a href="mech/nodes/nations/permissions.html">permissions</a> system</li>
</ul>
<h2 id="concept-overview"><a class="header" href="#concept-overview">Concept Overview</a></h2>
<p>The proposed nations system aims to be as dynamic as possible and gives the player as much freedom as possible when structuring their claims. Since the project aims to be a geopol, a proper, well made nations system is crucial for the project to succeed. As stated above, this system aims to integrate directly with the NPCs as a way to implement NPC specific event triggering and a sort of &quot;diplomacy algorithm&quot; to handle inter-player and non-player interactions.</p>
<p>Land claiming is just the basics of the nation system but the real magic lies in its object structure and unique permission based land management. With the permissions system, roles such as Governor, Treasurer, General, etc. will no longer just be &quot;roleplay&quot; but actually coded into the game.</p>
<p>Introduction of the plot system is not a new concept as it was done in Towny where nations/towns can set certain chunks as a different plot-type, each with their own special attributes. One such example is a jail plot that supposeduly would allow for the imprisonment of rival players. This feature was buggy and the towny method for implementing plots wasn't very straightforward and was barely beneficial for the casual player.</p>
<p>This new system attempts to fix that by tying plot-types to other plugins such as perhaps a factory plot that can tie into Movecraft or a <a href="mech/nodes/../economy/banking.html">bank plot that ties into the economy</a>. The plot-type system adds a way for other plugins to hook directly into our nation system by allowing for unique event triggers and more intuitive location-based event firing. </p>
<blockquote>
<p>See <a href="mech/nodes/nations/objects.html">Objects</a> and <a href="mech/nodes/nations/permissions.html">Permissions</a></p>
</blockquote>
<h3 id="warfare"><a class="header" href="#warfare">Warfare</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="objects-1"><a class="header" href="#objects-1">Objects</a></h1>
<p>As discussed briefly on the previous pages, the mechanic that sets this nation/land management system apart from other currently available plugins on the market is our more dynamic object hierarchy. We already discussed the overarching objects such as <a href="mech/nodes/nations/../territories.html"><code>Territories</code></a>, <code>Towns</code>, and <code>Nations</code> but now we will take it a step further and see how each of those objects can be compartmentalized into more specific groups and subgroups of objects.</p>
<h2 id="global-objects"><a class="header" href="#global-objects">Global Objects</a></h2>
<p>First we will discuss global objects. <code>Global objects</code> can be described as the general overarching objects or object groups. Gameplay wise, these objects can be accessed by anyone. Programming wise, the objects can and should be accessed by most other classes.</p>
<p>Here is a list of the global objects:</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="permissions"><a class="header" href="#permissions">Permissions</a></h1>
<p>One of the key features that seperates our nation system from others is the implementation of per-object permissions. This means that town and nation leaders have more freedom assigning permissions to their members outside of simply making someone an officer. It also introduces an &quot;anti-inactiveness&quot; feature where leadership will change hands to the next viable choice in event that the leader of the town or nation were to go inactive for an extended period of time.</p>
<h2 id="overview-6"><a class="header" href="#overview-6">Overview</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="npc-integration"><a class="header" href="#npc-integration">NPC Integration</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quests"><a class="header" href="#quests">Quests</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="regions"><a class="header" href="#regions">Regions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="city-states"><a class="header" href="#city-states">City States</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="map-overview"><a class="header" href="#map-overview">Map Overview</a></h1>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>⚠️ <strong>Warning:</strong> This page is still under construction!</p>
</blockquote>
<h1 id="accommonlib"><a class="header" href="#accommonlib">ACCommonLib</a></h1>
<p>Shared common library framework for future plugins that are relevant to the project.</p>
<h2 id="overview-7"><a class="header" href="#overview-7">Overview</a></h2>
<p>The purpose of this library is to attempt to eliminate as much unnecessary boilerplate code as possible. This includes things like implementing debugging features, a standardized command manager, and commented-configuration files.</p>
<p>It also provides the basis for an NPC API as well as a library for particle-related code, including but not limited to vector and character tracking. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="playerstats"><a class="header" href="#playerstats">PlayerStats</a></h1>
<p><code>PlayerStats</code> is one of the core components of the server. It is meant to function as more of a utility rather than a standalone plugin but offers some standalone functionality.</p>
<h2 id="overview-8"><a class="header" href="#overview-8">Overview</a></h2>
<p>The purpose of this plugin is essentially act as a handler that stores statistics of players for use with other components via API.</p>
<p>On its own without any integration with the other mechanics or plugins in place, <code>PlayerStats</code> is capable of storing and returning the following information:</p>
<ol>
<li>Playtime - Measure of a player's total playtime on the server</li>
<li>UUID - Stores Mojang UUID</li>
<li>IP - Purely for security reasons to prevent gaming of certain mechanics via the abuse of alternate accounts.</li>
<li>Kill/Death Ratio </li>
</ol>
<p>With the planned integration with the other mechanics, the database will expand to store the following information as well:</p>
<ol>
<li>Account balances - From the <a href="core/../mech/economy.html">Economy</a></li>
<li>Reputation - Collected through various methods; transactionally through <code>PlayerCards</code> as well as through <a href="core/../mech/cults.html">Cults</a> when recording player-god relationship status.</li>
</ol>
<h2 id="structure"><a class="header" href="#structure">Structure</a></h2>
<p>This section will outline the structure of the plugin from a programming standpoint. Here is a diagram to help those who are more visual learners:</p>
<p><img src="core/images/../../images/player-stats-structure.png" alt="PlayerStats Structure" /></p>
<p>A more updated graphic by <strong>don</strong> who is in-charge of working on the system:</p>
<p><img src="core/images/../../images/don_data_map.png" alt="Don's Updated Structure" /></p>
<h3 id="data-handling-old"><a class="header" href="#data-handling-old">Data Handling (OLD)</a></h3>
<blockquote>
<p>⚠️ <strong>Warning:</strong> This section is considered old as we are now using a fork of <strong>don</strong>'s <a href="https://github.com/donpsabance/Kaizen">Kaizen</a>.</p>
</blockquote>
<p>The main component of the plugin is the Data Access Layer (DAL), defined by the <code>data</code> package of the plugin. The DAL utilizes two main Data Access Objects (DAO). The first of these DAOs is the <code>UserDatabase</code> class, which handles the SQL connection via HikariCP as shown in the code below:</p>
<pre><code class="language-java">public class UserDatabase {

    private final String HOST = &quot;localhost&quot;;
    private final int PORT = 3306;
    private final String DB = &quot;playerstats&quot;;
    private final String USER = &quot;root&quot;;
    private final String PASS = plugin.getDbPass().getString(&quot;db-pass&quot;); // Getter for password from a config.yml in-order to                                                                      maintain proper OPSEC

    private HikariDataSource hikari;

    public void connect() throws SQLException {
        hikari = new HikariDataSource();
        hikari.setDataSourceClassName(&quot;com.mysql.jdbc.jdbc2.optional.MysqlDataSource&quot;);
        hikari.addDataSourceProperty(&quot;serverName&quot;, HOST);
        hikari.addDataSourceProperty(&quot;port&quot;, PORT);
        hikari.addDataSourceProperty(&quot;databaseName&quot;, DB);
        hikari.addDataSourceProperty(&quot;user&quot;, USER);
        hikari.addDataSourceProperty(&quot;password&quot;, PASS);
    }

    public boolean isConnected() { return hikari != null; }

    public HikariDataSource getHikari() { return hikari; }

    public void disconnect() {
        if (isConnected()) {
            hikari.close();
        }
    }
}
</code></pre>
<p>The second DAO creates a JSON file per user in order to store data in a flatfile primarily for redundancy purposes, in the event that an SQL connection is no longer available or compromised. The use case for this sort of data storage is very limited as it requires components to directly receive data by accessing the <code>PlayerStats</code> API rather than accessing the SQL database directly. </p>
<h3 id="data-handling-kaizen"><a class="header" href="#data-handling-kaizen">Data Handling (Kaizen)</a></h3>
<p>The new method of data handling utilizes <strong>don</strong>'s API known as <a href="https://github.com/donpsabance/Kaizen">Kaizen</a>.</p>
<h4 id="usage-1"><a class="header" href="#usage-1">Usage</a></h4>
<p>Running a task in a thread (will obtain a thread from pool specified in <code>config.yml</code>)</p>
<pre><code class="language-java">Kaizen.getThreadPool().getThreadPoolExecutor().submit(new Runnable() {
    @Override
    public void run() {

    }
});
</code></pre>
<p>Run a query to get (name, age) from <code>exampleTable</code> where <code>age</code> is greater than <code>18</code> in a separate thread (can also use counterpart <code>executePreparedStatement</code> to run in current thread - if needed)</p>
<p>Returns: </p>
<pre><code class="language-java">List&lt;HashMap&lt;String, Object&gt;&gt;
</code></pre>
<pre><code class="language-java">Kaizen.getDatabase().executePreparedStatementAsync(
    &quot;SELECT name, age FROM exampleTable WHERE name = ? AND age &gt; ?;&quot;, 
    Arrays.asList(&quot;John Doe&quot;, &quot;18&quot;));
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="housekeeping-rules"><a class="header" href="#housekeeping-rules">Housekeeping Rules</a></h1>
<p>This page goes over some basic housekeeping rules in-order to maintain efficiency and organization within the project as well as instating some general guidelines about maintaining, contributing to, and using the project.</p>
<h2 id="merge-conflicts-and-prevention"><a class="header" href="#merge-conflicts-and-prevention">Merge Conflicts and Prevention</a></h2>
<blockquote>
<p>Version control systems, like git, auto-magically manage code contributions. It identifies the change, when it occurred, who made it, and on what line so that developers can easily track the history of their codebase. However, git sometimes gets confused in the following situations:</p>
<ul>
<li>When more than one person changes the same line in a file and tries to merge the change to the same branch.</li>
<li>When a developer deletes a file, but another developer edits it, and they both try to merge their changes to the same branch.</li>
<li>When a developer deletes a line, but another developer edits it, and they both try to merge their changes to the same branch.</li>
<li>When a developer is cherry-picking a commit, which is the act of picking a commit from a branch and applying it to another.</li>
<li>When a developer is rebasing a branch, which is the process of moving a sequence of commits to a base commit.</li>
</ul>
<p><em>Taken from a <a href="https://dev.to/github/how-to-prevent-merge-conflicts-or-at-least-have-less-of-them-109p">Dev.to</a>.</em></p>
</blockquote>
<p>This can be extremely frustrating especially on a project such as this when there will be times where more than one person may be working on a specific piece of code. </p>
<p>Luckily we can take several steps to prevent this from happening: </p>
<h3 id="standardization-of-formatting"><a class="header" href="#standardization-of-formatting">Standardization of Formatting</a></h3>
<p>When developing in Java, many developers have different styles of coding. In-order to standardize here are some guidelines that you should try and follow to keep code uniform and to prevent preventable merge conflicts on PRs: </p>
<h4 id="whitespaces"><a class="header" href="#whitespaces"><strong>Whitespaces</strong></a></h4>
<p>This is a big one. Make sure there is a white space between each new method such as:</p>
<pre><code class="language-java">public class Example {
    // whitespace
    public Example() {
        //some code...
    }
    // whitespace
    public void anotherExample() {
        //some code...
    }
}
</code></pre>
<p>Add white spaces to make code more readable such as this example from <a href="https://github.com/TechnoVisionDev/JDA-Tutorial">TechnoVisionDev/JDA-Tutorial</a>:</p>
<p><em>Instead of doing this:</em></p>
<pre><code class="language-java">public class TutorialBot {
    
    public TutorialBot() throws LoginException {

        // Build shard manager
        DefaultShardManagerBuilder builder = DefaultShardManagerBuilder.createDefault(token);
        builder.setStatus(OnlineStatus.ONLINE);
        builder.setActivity(Activity.watching(&quot;TechnoVisionTV&quot;));
        builder.enableIntents(GatewayIntent.GUILD_MESSAGES, GatewayIntent.GUILD_MEMBERS, GatewayIntent.GUILD_PRESENCES);
        builder.setMemberCachePolicy(MemberCachePolicy.ALL);
        builder.setChunkingFilter(ChunkingFilter.ALL);
        builder.enableCache(CacheFlag.ONLINE_STATUS);
        shardManager = builder.build();

        // Register listeners
        shardManager.addEventListener(new EventListener(), new CommandManager());
    }
    ...
}
</code></pre>
<p><em>Do this:</em></p>
<pre><code class="language-java">public class TutorialBot {
    
    public TutorialBot() throws LoginException {

        // Build shard manager
        DefaultShardManagerBuilder builder = DefaultShardManagerBuilder.createDefault(token);
        builder.setStatus(OnlineStatus.ONLINE);
        builder.setActivity(Activity.watching(&quot;TechnoVisionTV&quot;));
        builder.enableIntents( // add whitespaces here to make it more readable
            GatewayIntent.GUILD_MESSAGES, 
            GatewayIntent.GUILD_MEMBERS, 
            GatewayIntent.GUILD_PRESENCES
            );
            ...
        shardManager = builder.build();

        // Register listeners
        shardManager.addEventListener( // add them here too
            new EventListener(), 
            new CommandManager()
            // this also makes it easier if you were to add more things to the list later on
            ); 
    }
    ...
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="optimization"><a class="header" href="#optimization">Optimization</a></h1>
<p>This section discusses various methods of keeping code optimized. This project introduces some very resource intensive mechanics and in-order to improve server performance wherever possible we must first begin with the code itself in-order to minimize performance impact and reduce memory usage and consumption.</p>
<h2 id="avoid-writing-long-methods"><a class="header" href="#avoid-writing-long-methods">Avoid Writing Long Methods</a></h2>
<p>The methods should not be too long and should be specific to perform single functionality. It is better for maintenance as well as performance since while class loading and during method call, the method is loaded in stack memory. If methods are large with too much processing they will consume memory as well as CPU cycles to execute.</p>
<p>Try to break the methods into smaller ones at suitable logical points. Also, if you want to strengthen your skills in Java then enroll with Geeksforgeeks Java Programming Foundation – Self-Paced course and learn the basic concepts, data types, operators, functions &amp; more.</p>
<h2 id="use-efficient-data-structures-and-algorithms"><a class="header" href="#use-efficient-data-structures-and-algorithms">Use Efficient Data Structures and Algorithms</a></h2>
<p>Choose the most appropriate data structures and algorithms for your specific use case. For example, use <code>HashMap</code> instead of a <code>List</code> if you need fast lookups, or use a priority queue instead of sorting an array if you only need the smallest or largest items.</p>
<h2 id="minimize-object-creation"><a class="header" href="#minimize-object-creation">Minimize Object Creation</a></h2>
<p>Creating and destroying objects in Java can be expensive. Use object pooling to reuse objects instead of creating new ones, and use immutable objects to avoid unnecessary object creation.</p>
<h2 id="use-the-stringbuilder-class-for-string-concatenation"><a class="header" href="#use-the-stringbuilder-class-for-string-concatenation">Use the StringBuilder Class for String Concatenation</a></h2>
<p>When concatenating strings in a loop or other performance-critical code, use the StringBuilder class instead of the + operator, which creates new strings and can be slow.</p>
<p>A string is an immutable class the object created by String cannot be reused. So if we need to create a large string in case of SQL queries etc it is bad practice to concatenate the String object using the ‘+’ operator.</p>
<p>This will lead to multiple objects of String created leading to more usage of heap memory. In this case, we can use StringBuilder or StringBuffer, the former is preferential over the latter since it has a performance advantage due to non-synchronized methods. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java"> String query = String1+String2+String3;
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">StringBuilder strBuilder = new StringBuilder(“”);

strBuilder.append(String1).append(String2).append(String3);

String query = strBuilder.toString();            
</code></pre>
<h2 id="use-the-enhanced-for-loop"><a class="header" href="#use-the-enhanced-for-loop">Use the Enhanced &quot;for&quot; Loop</a></h2>
<p>When iterating over collections, use the enhanced for loop (for-each loop) instead of a regular for loop, as it is generally more efficient.</p>
<p>While iterating through any collection get the size of the collection beforehand and never get it during iteration. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">List&lt;String&gt; objList = getData();
for (int i = 0; i &lt; objList.size(); i++) { execute code ..}
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">List&lt;String&gt; objList = getData();
int size = objList.size();
for (int i = 0; i &lt; size; i++) { execute code ..} 
</code></pre>
<h2 id="avoid-multiple-if-else-statements"><a class="header" href="#avoid-multiple-if-else-statements">Avoid Multiple If-else Statements</a></h2>
<p>We use conditional statements in our code for decision-making. The conditional statements should not be overused. If we are using too many conditional if-else statements it will impact performance since JVM will have to compare the conditions. This can become worse if the same is used in looping statements like for, while, etc.</p>
<p>If there are too many conditions in your business logic try to group the conditions and get the boolean outcome and use it in the if statement. Also, we can think of using a switch statement instead of multiple if-else if possible. Switch statement has a performance advantage over if – else. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">if (condition1) {

    if (condition2) {

        if (condition3 || condition4) { execute ..}

        else { execute..}
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">boolean result = (condition1 &amp;&amp; condition2) &amp;&amp; (condition3  || condition4)  
</code></pre>
<h2 id="avoid-unnessary-method-calls"><a class="header" href="#avoid-unnessary-method-calls">Avoid Unnessary Method Calls</a></h2>
<p>Minimize the number of method calls in your code, especially in loops or other performance-critical code. For example, cache the result of a method call if it doesn't change between calls.</p>
<h2 id="optimize-memory-usage"><a class="header" href="#optimize-memory-usage">Optimize Memory Usage</a></h2>
<p>Avoid unnecessary object creation, use primitive data types when possible, and free up memory when it's no longer needed. This can help reduce memory usage and improve performance.</p>
<p>Usage of primitive types over objects is beneficial since the primitive type data is stored on stack memory and the objects are stored on heap memory. If possible, we can use primitive types instead of objects since data access from stack memory is faster than heap memory. So it is always beneficial to use <code>int</code> over <code>Integer</code> or <code>double</code> over <code>Double</code>.</p>
<p>This also applies to the use of <code>BigDecimal</code>.</p>
<p>We know that BigDecimal class provides accurate precision for the decimal values. Over usage of this object hampers the performance drastically specifically when the same is used to calculate certain values in a loop.</p>
<p>BigDecimal uses a lot of memory over long or double to perform calculations. If precision is not the constraint or if we are sure the range of the calculated value will not exceed long or double we can avoid using BigDecimal and use long or double with proper casting instead.</p>
<h2 id="avoid-creating-big-objects-often"><a class="header" href="#avoid-creating-big-objects-often">Avoid Creating Big Objects Often</a></h2>
<p>There are certain classes that act as data holders within the application. These objects are heavy and their creation should be avoided multiple times. An example of such objects is the DB connection objects or system configuration objects or session objects for the user after login.</p>
<p>These objects used a lot of resources while created. We should reuse these objects instead of creating them as creation will drastically hamper the application performance due to more memory usage. We should use the Singleton pattern wherever possible to create a single instance of the object and reuse it wherever required or clone the object instead of creating a new one.</p>
<h2 id="use-stored-procedures-instead-of-queries"><a class="header" href="#use-stored-procedures-instead-of-queries">Use Stored Procedures Instead of Queries</a></h2>
<p>It is better to write stored procedures instead of complex and long queries and call them while processing. Stored procedures are stored as objects in the database and pre-compiled.</p>
<p>The execution time of the stored procedure is less compared to the query with the same business logic as a query is compiled and executed every time wherever it is called through the application. Also, the stored procedure has an advantage in data transfer and network traffic since we are not transferring the complex query for execution every time to the database server.</p>
<h2 id="using-preparedstatement-instead-of-statement"><a class="header" href="#using-preparedstatement-instead-of-statement">Using <code>PreparedStatement</code> instead of <code>Statement</code></a></h2>
<p>While executing the SQL query through the application we use JDBC API and classes for the same. <code>PreparedStatement</code> has an advantage over <code>Statement</code> for parameterized query execution since the preparedstatement object is compiled once and executed multiple times. Statement object on other hand is compiled and executed every time it is called. Also, the prepared statement object is safe to avoid SQL injection attacks for Web Application security.</p>
<h2 id="select-required-columns-in-a-query"><a class="header" href="#select-required-columns-in-a-query">Select Required Columns in a Query</a></h2>
<p>While getting the data from the database we use select queries to get the data. Avoid selecting columns that are not necessary for further processing. Select only those columns which we will be required for further processing or display on the front end. Selecting too many columns causes a delay in query execution at the database end. Also, it increases network traffic from database to application which should be avoided.</p>
<p>The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">select * from users where user_id = 100;
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">select user_name, user_age, user_gender, user_occupation, user_address from users where user_id = 100;
</code></pre>
<h2 id="fetch-data-using-joins"><a class="header" href="#fetch-data-using-joins">Fetch Data Using Joins</a></h2>
<p>While getting the data from multiple tables it is necessary to use the joins properly on tables. If the joins are not properly used or the tables are not normalized it will cause a delay in query execution leading to a performance hit for the application. Avoid using subqueries instead of joins as subqueries take more time for execution than joins.</p>
<p>Create an index on columns of the table which are frequently used for improving the performance of query execution and reducing the latency of the application.</p>
<h2 id="use-of-unnecessary-log-statements-and-incorrect-log-levels"><a class="header" href="#use-of-unnecessary-log-statements-and-incorrect-log-levels">Use of Unnecessary Log Statements and Incorrect Log Levels</a></h2>
<p>Logging is an integral part of any application and needs to be implemented efficiently in order to avoid performance hits due to incorrect logging and log levels. We should avoid logging big objects into code. Logging should be limited to specific parameters we need to monitor and not the whole object.</p>
<p>Also, the logging level should be kept to higher levels like DEBUG, ERROR, and not INFO. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">Logger.debug(&quot;User info : &quot; + user.toString());
Logger.info(&quot;Method called for setting user data:&quot; + user.getData());
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">Logger.debug(“User info : ” + user.getName() + ” : login ID : ” + user.getLoginId());
Logger.info(“Method called for setting user data”);
</code></pre>
<blockquote>
<p>See also <a href="administration/coding-standard.html">Coding Standard</a></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="coding-standard"><a class="header" href="#coding-standard">Coding Standard</a></h1>
<p>Coding standards are a set of guidelines that reputable software development companies expect their programmers to adhere to. According to their organization's needs and the kinds of software they create, they typically create their own coding standards and rules. Maintaining coding standards is crucial for programmers; otherwise, the code would be rejected during code review.</p>
<p>For our project, we would like to implement and enforce some coding standards to achieve uniformity across the various different repositories and to make collaboration easier.</p>
<blockquote>
<p>See also <a href="administration/housekeeping.html">Housekeeping</a> and <a href="administration/optimization.html">Optimization</a> as well as <a href="https://www.cs.bu.edu/courses/cs112/problem_sets/coding_standards.html#:~:text=There%20are%20two%20standard%20formats%20for%20braces%2C%20either,a%20pair%20is%20lined%20up%20%20vertically.%20">this</a> page by Wayne Snyder from Boston University.</p>
</blockquote>
<h2 id="purpose-of-having-coding-standards"><a class="header" href="#purpose-of-having-coding-standards">Purpose of Having Coding Standards:</a></h2>
<ul>
<li>A coding standard gives a uniform appearance to the codes written by different engineers.</li>
<li>It improves readability, and maintainability of the code and it reduces complexity also.</li>
<li>It helps in code reuse and helps to detect error easily.</li>
<li>It promotes sound programming practices and increases efficiency of the programmers.</li>
</ul>
<p>Below is the outlined coding standard going forward.</p>
<h2 id="standardization-of-headers-for-different-modules"><a class="header" href="#standardization-of-headers-for-different-modules">Standardization of Headers for Different Modules</a></h2>
<p>A header is the block of text at the top of a class, it should go at the top of the class and include the following things:</p>
<ul>
<li>Name of the module</li>
<li>Date of module creation</li>
<li>Author of the module</li>
<li>Modification history</li>
<li>Synopsis of the module about what the module does</li>
<li>Different functions supported in the module along with their input output parameters</li>
<li>Global variables accessed or modified by the module</li>
</ul>
<p>Header comments (see below) should use the multi-line comment style (i.e., use * and */) and all other comments should use the single-line (i.e., use //) convention. This is because you can surround single-line comments with a multi-line comment, but not multi-line around multi-line — if you want to comment out a region of code during development, and you used multi-line comments everywhere, you are stuck.</p>
<p>Here is an example of a header comment:</p>
<pre><code class="language-java">/*
  * Customer.java
  * by John Doe (jdoe@example.com)
  * 2022-03-20
  *
  * This class represents a bank customer. It contains basic
  * fields and references to the customer's accounts.
  *
  * Note that the main() method's input data file must be
  * called &quot;finance_data.txt&quot;. For the format of this
  * file, see comment above the getData() method.
  *
  * Credits: The code for the hash table in the
  * calculateInterestRate() method was taken from
  * &quot;Algorithms and Data Structures,&quot; by George Guidal, pp. 234-35.
  */
</code></pre>
<blockquote>
<p>📝 <strong>Note:</strong> You can generate some default file header comments with IntelliJ IDEA, see <a href="https://www.jetbrains.com/help/idea/using-file-and-code-templates.html#syntax">their page on how to do this</a>.</p>
</blockquote>
<p>A header should also (for our purposes) come in the form of a repository's <code>README.md</code> file. Each repository should be initialized with a README, and if it is a plugin then it must also be initialized with a properly formatted <code>plugin.yml</code> file.</p>
<p>For better understanding and maintenance of the code, the header of different modules should follow some standard format and information. The header format must contain the following:</p>
<h3 id="name-of-the-module"><a class="header" href="#name-of-the-module"><strong>Name of the Module</strong></a></h3>
<p>Here is the name of the project or module for which the repository was made. Name should be short and concise by giving an accurate description of the main purpose of that plugin or project.</p>
<p>For example, the <a href="administration/../core/playerstats.html"><code>PlayerStats</code></a> module, although it will handle the database connection  and data storage for the rest of the project, it's main purpose is to record information about the player in the form of statistics therefore: <code>PlayerStats</code>.</p>
<p>The <a href="administration/../mech/economy/market.html"><code>Market</code></a> module handles the entire economy system of the project by implementing an API but it's main purpose is to build a functioning dynamic market economy, thus: <code>Market</code>.</p>
<h3 id="proper-dating"><a class="header" href="#proper-dating"><strong>Proper Dating</strong></a></h3>
<p>The creation of the module as well as the dates of any major or minor updates and/or bug fixes must be correctly recorded to keep things organized. Please follow <code>ISO 8601</code> (YYYY-MM-DD). </p>
<h3 id="crediting-of-contributors"><a class="header" href="#crediting-of-contributors"><strong>Crediting of Contributors</strong></a></h3>
<p>Please accurately credit authors of the code including yourself and any other contributor such as authors of open-source works that you took from. This is to prevent any licencing or copyright issues as well as serve as a reference as to who should be contacted in the event of a bug or feature request.</p>
<h3 id="modification-history"><a class="header" href="#modification-history"><strong>Modification History</strong></a></h3>
<p>The complete and unadulturated modification history of the module and its files should be documented.</p>
<p>This includes but not limited to: </p>
<ul>
<li>The creation and maintaining of a proper changelog that correctly uses SemVer 
<ul>
<li>
<blockquote>
<p>See: <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a> as well as <a href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a></p>
</blockquote>
</li>
</ul>
</li>
<li>Proper commits and commit comments
<ul>
<li>
<blockquote>
<p>See: <a href="administration/commits.html">Proper Git Commits</a> on how to practice good commits</p>
</blockquote>
</li>
</ul>
</li>
<li>Commenting out of deprecated code rather than deleting for posterity and documentation purposes</li>
<li>When possible, add proper annotations such as <code>@Deprecated</code> when planning to remove a method in the future</li>
</ul>
<h3 id="synopsis-of-the-module"><a class="header" href="#synopsis-of-the-module"><strong>Synopsis of the Module</strong></a></h3>
<p>A short summary of the module and what it aims to do and currently does should be included.</p>
<p>This also includes different functions supported in the module along with their input output parameters (i.e. commands and command arguments/parameters and the intendend outputs)</p>
<p>Be descriptive!</p>
<h2 id="naming-conventions-for-local-variables-global-variables-constants-and-functions"><a class="header" href="#naming-conventions-for-local-variables-global-variables-constants-and-functions">Naming Conventions for Local Variables, Global Variables, Constants and Functions</a></h2>
<p>Below are some naming conventions to follow when writing code:</p>
<ul>
<li>Meaningful and understandable variables name helps anyone to understand the reason of using it.</li>
<li>Local variables should be named using camel case lettering starting with small letter (e.g. localData) </li>
<li>Global variables names should start with a capital letter (e.g. GlobalData)</li>
<li>Constant names should be formed using capital letters only (e.g. CONSDATA)</li>
<li>Avoid the use of digits in variable names</li>
<li>The names of the function should be written in camel case starting with small letters</li>
<li>The name of the function must describe the reason of using the function clearly and briefly</li>
</ul>
<h2 id="proper-indentation-and-spacing"><a class="header" href="#proper-indentation-and-spacing">Proper Indentation and Spacing</a></h2>
<blockquote>
<p>This was covered briefly in <a href="administration/housekeeping.html">Housekeeping</a></p>
</blockquote>
<p>Proper indentation is very important to increase the readability of the code. For making the code readable, programmers should use White spaces properly. Some of the spacing conventions are given below:</p>
<ul>
<li>There must be a space after giving a comma between two function arguments.</li>
<li>Each nested block should be properly indented and spaced.</li>
<li>Proper indentation should be there at the beginning and at the end of each block in the program.</li>
<li>Curly brace goes at the end of the line that starts the class, method, loop, etc., and the closing brace is on a line by itself, lined up vertically with the start of the first line:</li>
</ul>
<p>This will look like this:</p>
<pre><code class="language-java">public class SomeClass {

    public SomeClass() {
        ...;
    }

    public int someMethod(int n, float m) {
        ...;
        for (int i = 0; i &lt; someField; i++) {
            ...;
        }
        ...;
    }
}
</code></pre>
<h2 id="code-should-be-well-documented"><a class="header" href="#code-should-be-well-documented">Code Should be Well Documented</a></h2>
<p>The code should be properly commented for understanding easily. Comments regarding the statements increase the understandability of the code.</p>
<p>For each significant field or variable declaration, give a brief comment stating the use of the variable, and when useful, the units (e.g., feet or inches).</p>
<p>Give end-of-line comments for any line of code that is trickly, or non-obvious; don’t overdo this, and don’t just rephrase the Java in English, but DO provide concise, informative comments to help the reader (who knows Java idioms, but not your code) understand what is going on.</p>
<p>Create Javadoc comments wherever and whenever possible, <a href="https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html">here</a> is a tutorial on how to use the Javadoc feature in your code.</p>
<h2 id="reduce-function-length-whenever-possible"><a class="header" href="#reduce-function-length-whenever-possible">Reduce Function Length Whenever Possible</a></h2>
<p>Lengthy functions are very difficult to understand. That’s why functions should be small enough to carry out small work and lengthy functions should be broken into small ones for completing small tasks.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="proper-git-commits"><a class="header" href="#proper-git-commits">Proper Git Commits</a></h1>
<p>On this page you will find some guidelines and tips to keeping well organized and written commit messages. This guideline is just a suggestion ofcourse as even I (zune) am guilty of writing subpar and nondescriptive commit messages or commiting a million files at once. This is a habit that I hope to break and that we should all aim to break as well.</p>
<p>Most of the information on this page was taken from these sources:</p>
<blockquote>
<p>See: <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">tbaggery.com</a>, <a href="https://wiki.openstack.org/wiki/GitCommitMessages">openstack</a>, <a href="http://chris.beams.io/posts/git-commit/">chris.beams.io</a></p>
</blockquote>
<h2 id="commit-message-guidelines"><a class="header" href="#commit-message-guidelines">Commit Message Guidelines</a></h2>
<p>Here’s a model Git commit message:</p>
<pre><code>Capitalized, short (50 chars or less) summary

More detailed explanatory text, if necessary.  Wrap it to about 72
characters or so.  In some contexts, the first line is treated as the
subject of an email and the rest of the text as the body.  The blank
line separating the summary from the body is critical (unless you omit
the body entirely); tools like rebase can get confused if you run the
two together.

Write your commit message in the imperative: &quot;Fix bug&quot; and not &quot;Fixed bug&quot;
or &quot;Fixes bug.&quot;  This convention matches up with commit messages generated
by commands like git merge and git revert.

Further paragraphs come after blank lines.

- Bullet points are okay, too

- Typically a hyphen or asterisk is used for the bullet, followed by a
  single space, with blank lines in between, but conventions vary here

- Use a hanging indent
</code></pre>
<p>A properly formed git commit subject line should always be able to complete the following sentence:</p>
<p>&quot;If applied, this commit will <em>&lt;your subject line here&gt;</em>&quot;</p>
<p>Examples:<br />
&quot;If applied, this commit will <strong>fix issue #2</strong>&quot;, &quot;If applied, this commit will <strong>add new pages to the documentation</strong>&quot;</p>
<h3 id="rules-for-formatting-git-commit-messages"><a class="header" href="#rules-for-formatting-git-commit-messages">Rules For Formatting Git Commit Messages</a></h3>
<ul>
<li>Separate subject from body with a blank line</li>
<li>Do not end the subject line with a period</li>
<li>Capitalize the subject line and each paragraph</li>
<li>Use the imperative mood in the subject line</li>
<li>Wrap lines at 72 characters</li>
<li>Use the body to explain what and why you have done something. 
<ul>
<li>In most cases, you can leave out details about how a change has been made, rather, this should be explained within the code via adding comments</li>
</ul>
</li>
</ul>
<h3 id="information-in-commit-messages"><a class="header" href="#information-in-commit-messages">Information in Commit Messages</a></h3>
<ul>
<li>Describe why a change is being made.</li>
<li>How does it address the issue?</li>
<li>What effects does the patch have?</li>
<li>Do not assume the reviewer understands what the original problem was.</li>
<li>Do not assume the code is self-evident/self-documenting.</li>
<li>Read the commit message to see if it hints at improved code structure.</li>
<li>The first commit line is the most important.</li>
<li>Describe any limitations of the current code.</li>
<li>Do not include patch set-specific comments.</li>
</ul>
<p>Details for each point and good commit message examples can be found <a href="https://wiki.openstack.org/wiki/GitCommitMessages#Information_in_commit_messages">here</a></p>
<h2 id="references-in-commit-messages"><a class="header" href="#references-in-commit-messages">References in commit messages</a></h2>
<p>If the commit refers to an issue, add this information to the commit message header or body. e.g. the GitHub web platform automatically converts issue ids (e.g. #123) to links referring to the related issue. </p>
<p>In header:</p>
<pre><code>[#123] Refer to GitHub issue…
</code></pre>
<p>In body:</p>
<pre><code>…
Fixes #123, #124
</code></pre>
<h2 id="structural-split-of-changes"><a class="header" href="#structural-split-of-changes">Structural Split of Changes</a></h2>
<p><em><strong>The cardinal rule for creating good commits is to ensure there is only one &quot;logical change&quot; per commit</strong></em>.</p>
<p>There are many reasons why this is an important rule:</p>
<ul>
<li>The smaller the amount of code being changed, the quicker &amp; easier it is to review &amp; identify potential flaws.</li>
<li>If a change is found to be flawed later, it may be necessary to revert the broken commit. This is much easier to do if there are not other unrelated code changes entangled with the original commit.</li>
<li>When troubleshooting problems using Git's bisect capability, small well defined changes will aid in isolating exactly where the code problem was introduced.</li>
<li>When browsing history using Git annotate/blame, small well defined changes also aid in isolating exactly where &amp; why a piece of code came from.</li>
</ul>
<h2 id="things-to-avoid"><a class="header" href="#things-to-avoid">Things to Avoid</a></h2>
<p>Here are some things to avoid when writing your commit messages:</p>
<h3 id="mixing-whitespace-changes-with-functional-code-changes"><a class="header" href="#mixing-whitespace-changes-with-functional-code-changes"><strong>Mixing whitespace changes with functional code changes.</strong></a></h3>
<p>The whitespace changes will obscure the important functional changes, making it harder for a reviewer to correctly determine whether the change is correct.</p>
<p><strong>Solution:</strong> Create 2 commits, one with the whitespace changes, one with the functional changes. Typically the whitespace change would be done first, but that need not be a hard rule.</p>
<h3 id="mixing-two-unrelated-functional-changes"><a class="header" href="#mixing-two-unrelated-functional-changes"><strong>Mixing two unrelated functional changes.</strong></a></h3>
<p>Again the reviewer will find it harder to identify flaws if two unrelated changes are mixed together. If it becomes necessary to later revert a broken commit, the two unrelated changes will need to be untangled, with further risk of bug creation.</p>
<h3 id="sending-large-new-features-in-a-single-giant-commit"><a class="header" href="#sending-large-new-features-in-a-single-giant-commit"><strong>Sending large new features in a single giant commit.</strong></a></h3>
<p>It may well be the case that the code for a new feature is only useful when all of it is present.</p>
<p>This does not, however, imply that the entire feature should be provided in a single commit. New features often entail refactoring existing code.</p>
<p>It is highly desirable that any refactoring is done in commits which are separate from those implementing the new feature. This helps reviewers and test suites validate that the refactoring has no unintentional functional changes. Even the newly written code can often be split up into multiple pieces that can be independently reviewed.</p>
<p>For example, changes which add new internal APIs/classes, can be in self-contained commits. Again this leads to easier code review. It also allows other developers to cherry-pick small parts of the work, if the entire new feature is not immediately ready for merge.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>⚠️ <strong>Warning:</strong> This page is still under construction!</p>
</blockquote>
<h1 id="project-timeline"><a class="header" href="#project-timeline">Project Timeline</a></h1>
<p>This page will outline the planned timeline for the project with a quick summary and breakdown of the phases of development, as well as the planned timeframe of each phase. </p>
<blockquote>
<p>This information is current as of <code>2023-02-03</code></p>
</blockquote>
<h2 id="phase-1"><a class="header" href="#phase-1"><a href="administration/timeline/phase-1.html">Phase 1</a></a></h2>
<p>This is the first phase of development. In this phase the primary foci will be:</p>
<ul>
<li>Backend development:
<ul>
<li>Development of a <a href="administration/../core/common-lib.html">common library</a> for use with all future plugins.</li>
<li></li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="phase-1-1"><a class="header" href="#phase-1-1">Phase 1</a></h1>
<p>The focus of the first phase of development is developing a strong backbone for the entire project to work off of. This includes the creation of a shared plugin framework as well as setting the grounds for a solid API. Attached below is a diagram showing the dependency web for this phase of development, and from that diagram one might be able to discern from it an abstract timeline for this phase of development:</p>
<p><img src="administration/timeline/images/../../../images/p1-dependency-web.png" alt="Phase 1 Dependencies" /></p>
<h2 id="overview-9"><a class="header" href="#overview-9">Overview</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lore"><a class="header" href="#lore">Lore</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributions"><a class="header" href="#contributions">Contributions</a></h1>
<p>This page contains a list of all of the kind and amazing people who have contributed pieces of work to the project. If you have helped with the project and do not see your name here, please message zune (zune#8662) on Discord!</p>
<h2 id="mechanics"><a class="header" href="#mechanics">Mechanics:</a></h2>
<p><a href="http://programmerdan.com/">ProgrammerDan</a><br />
<a href="https://github.com/TownyAdvanced">Towny</a><br />
<a href="https://github.com/LlmDl">LlmDl</a><br />
<a href="https://github.com/phonon">phonon</a><br />
<a href="https://github.com/crusalis/multi-nodes">multi-nodes</a><br />
<a href="https://builtbybit.com/members/digitalguardian.421303/#about">DigitalGuardian</a>
<a href="https://github.com/AirshipCraft/CombatMechanics">Locutusque</a><br />
<a href="https://github.com/AirshipCraft/ArtifactItems">SupremeNoob</a><br />
<a href="https://github.com/Bmbay10">Bmbay10</a><br />
<a href="https://github.com/donpsabance">donpsabance</a>
<a href="https://github.com/TryLovingMichael">MichaelH</a></p>
<h3 id="discord"><a class="header" href="#discord">Discord:</a></h3>
<p><a href="https://github.com/inspector-packet"><strong>InspectorPacket</strong></a></p>
<h3 id="homepage"><a class="header" href="#homepage">Homepage:</a></h3>
<p><a href="https://html5up.net/eventually#:~:text=Eventually%20%7C%20HTML5%20UP%20Eventually%20A%20simple%20template,big%20thing.%20Brought%20to%20you%20by%20HTML5%20UP.">&quot;Eventually&quot; by HTML5UP</a></p>
<h3 id="documentation"><a class="header" href="#documentation">Documentation:</a></h3>
<p><strong>AimNotBrain</strong><br />
<a href="https://github.com/phonon">phonon</a><br />
<a href="https://rust-lang.github.io/mdBook/">mdbook</a><br />
<a href="https://github.com/zjp-CN/mdbook-theme">mdbook-theme</a></p>
<h2 id="map"><a class="header" href="#map">Map:</a></h2>
<p><a href="https://paralon.net/">Paralon</a> - The base map used.</p>
<p><strong>zem</strong> - The owner and creator of the map, who also spent New Year's Eve uploading the entire ~17GB file to the server directly via FTP since the download wasn't working for me.</p>
<h3 id="builders"><a class="header" href="#builders"><strong>Builders</strong>:</a></h3>
<p><strong>Renzy_671</strong><br />
<strong>Nezuika</strong><br />
<strong>Passbuilds</strong><br />
<strong>SupremeNoob</strong><br />
<strong>RADGALF_BITGALF</strong><br />
<strong>Baitman777</strong><br />
<strong>Duder_123</strong><br />
<strong>IcyGaming</strong><br />
<strong>Juz</strong><br />
<strong>Themanofpie</strong><br />
<strong>mjcrafter100</strong><br />
<strong>backlist</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/pagetoc.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
