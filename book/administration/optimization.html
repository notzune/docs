<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Optimization - AirshipCraft Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/pagetoc.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../CHANGELOG.html">Changelog</a></li><li class="chapter-item expanded affix "><li class="part-title">Mechanics</li><li class="chapter-item expanded "><a href="../mech/economy.html"><strong aria-hidden="true">1.</strong> Economy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/economy/market.html"><strong aria-hidden="true">1.1.</strong> Market</a></li><li class="chapter-item expanded "><a href="../mech/economy/spreadsheet.html"><strong aria-hidden="true">1.2.</strong> Spreadsheet</a></li><li class="chapter-item expanded "><a href="../mech/economy/banking.html"><strong aria-hidden="true">1.3.</strong> Banking</a></li><li class="chapter-item expanded "><a href="../mech/economy/companies.html"><strong aria-hidden="true">1.4.</strong> Companies</a></li><li class="chapter-item expanded "><a href="../mech/economy/resources.html"><strong aria-hidden="true">1.5.</strong> Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/economy/resources/crops.html"><strong aria-hidden="true">1.5.1.</strong> Crops</a></li><li class="chapter-item expanded "><a href="../mech/economy/resources/hiddenore.html"><strong aria-hidden="true">1.5.2.</strong> HiddenOre</a></li></ol></li><li class="chapter-item expanded "><a href="../mech/economy/API.html"><strong aria-hidden="true">1.6.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/economy/api/hierarchy.html"><strong aria-hidden="true">1.6.1.</strong> Class Hierarchy</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../mech/npc.html"><strong aria-hidden="true">2.</strong> NPCs</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Types</div></li></ol></li><li class="chapter-item expanded "><a href="../mech/combat.html"><strong aria-hidden="true">3.</strong> Combat</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/combat/movecraft.html"><strong aria-hidden="true">3.1.</strong> Movecraft</a></li><li class="chapter-item expanded "><a href="../mech/combat/damagelistener.html"><strong aria-hidden="true">3.2.</strong> DamageListener</a></li><li class="chapter-item expanded "><a href="../mech/combat/weapons.html"><strong aria-hidden="true">3.3.</strong> Artifacts</a></li></ol></li><li class="chapter-item expanded "><a href="../mech/skills.html"><strong aria-hidden="true">4.</strong> Skills</a></li><li class="chapter-item expanded "><a href="../mech/cults.html"><strong aria-hidden="true">5.</strong> Cults</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/cults/objects.html"><strong aria-hidden="true">5.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="../mech/cults/config.html"><strong aria-hidden="true">5.2.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../mech/cults/altars.html"><strong aria-hidden="true">5.3.</strong> Altars</a></li><li class="chapter-item expanded "><a href="../mech/cults/shrines.html"><strong aria-hidden="true">5.4.</strong> Shrines</a></li><li class="chapter-item expanded "><a href="../mech/cults/transmutations.html"><strong aria-hidden="true">5.5.</strong> Transmutations</a></li></ol></li><li class="chapter-item expanded "><a href="../mech/nodes.html"><strong aria-hidden="true">6.</strong> Nodes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/nodes/territories.html"><strong aria-hidden="true">6.1.</strong> Territories</a></li><li class="chapter-item expanded "><a href="../mech/nodes/handles-over-ids.html"><strong aria-hidden="true">6.2.</strong> Prefer Handles over IDs</a></li><li class="chapter-item expanded "><a href="../mech/nodes/nation-system.html"><strong aria-hidden="true">6.3.</strong> Nation System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mech/nodes/nations/objects.html"><strong aria-hidden="true">6.3.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="../mech/nodes/nations/permissions.html"><strong aria-hidden="true">6.3.2.</strong> Permissions</a></li></ol></li><li class="chapter-item expanded "><a href="../mech/nodes/npc-integration.html"><strong aria-hidden="true">6.4.</strong> NPC Integration</a></li></ol></li><li class="chapter-item expanded "><a href="../mech/quests.html"><strong aria-hidden="true">7.</strong> Quests</a></li><li class="chapter-item expanded affix "><li class="part-title">Map</li><li class="chapter-item expanded "><a href="../map/regions.html"><strong aria-hidden="true">8.</strong> Regions</a></li><li class="chapter-item expanded "><a href="../map/cities.html"><strong aria-hidden="true">9.</strong> City States</a></li><li class="chapter-item expanded "><a href="../map/mapoverview.html"><strong aria-hidden="true">10.</strong> Map Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Core</li><li class="chapter-item expanded "><a href="../core/common-lib.html"><strong aria-hidden="true">11.</strong> ACCommonLib</a></li><li class="chapter-item expanded "><a href="../core/datum.html"><strong aria-hidden="true">12.</strong> Datum</a></li><li class="chapter-item expanded affix "><li class="part-title">General Development</li><li class="chapter-item expanded "><a href="../administration/housekeeping.html"><strong aria-hidden="true">13.</strong> Housekeeping</a></li><li class="chapter-item expanded "><a href="../administration/optimization.html" class="active"><strong aria-hidden="true">14.</strong> Optimization</a></li><li class="chapter-item expanded "><a href="../administration/coding-standard.html"><strong aria-hidden="true">15.</strong> Coding Standard</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../administration/commits.html"><strong aria-hidden="true">15.1.</strong> Proper Git Commits</a></li></ol></li><li class="chapter-item expanded "><a href="../administration/project-timeline.html"><strong aria-hidden="true">16.</strong> Project Timeline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../administration/timeline/phase-1.html"><strong aria-hidden="true">16.1.</strong> Phase 1</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Misc</li><li class="chapter-item expanded "><a href="../misc/lore.html"><strong aria-hidden="true">17.</strong> Lore</a></li><li class="chapter-item expanded affix "><a href="../misc/contributions.html">Contributions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AirshipCraft Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <h1 id="optimization"><a class="header" href="#optimization">Optimization</a></h1>
<p>This section discusses various methods of keeping code optimized. This project introduces some very resource intensive mechanics and in-order to improve server performance wherever possible we must first begin with the code itself in-order to minimize performance impact and reduce memory usage and consumption.</p>
<h2 id="avoid-writing-long-methods"><a class="header" href="#avoid-writing-long-methods">Avoid Writing Long Methods</a></h2>
<p>The methods should not be too long and should be specific to perform single functionality. It is better for maintenance as well as performance since while class loading and during method call, the method is loaded in stack memory. If methods are large with too much processing they will consume memory as well as CPU cycles to execute.</p>
<p>Try to break the methods into smaller ones at suitable logical points. Also, if you want to strengthen your skills in Java then enroll with Geeksforgeeks Java Programming Foundation – Self-Paced course and learn the basic concepts, data types, operators, functions &amp; more.</p>
<h2 id="use-efficient-data-structures-and-algorithms"><a class="header" href="#use-efficient-data-structures-and-algorithms">Use Efficient Data Structures and Algorithms</a></h2>
<p>Choose the most appropriate data structures and algorithms for your specific use case. For example, use <code>HashMap</code> instead of a <code>List</code> if you need fast lookups, or use a priority queue instead of sorting an array if you only need the smallest or largest items.</p>
<h2 id="minimize-object-creation"><a class="header" href="#minimize-object-creation">Minimize Object Creation</a></h2>
<p>Creating and destroying objects in Java can be expensive. Use object pooling to reuse objects instead of creating new ones, and use immutable objects to avoid unnecessary object creation.</p>
<h2 id="use-the-stringbuilder-class-for-string-concatenation"><a class="header" href="#use-the-stringbuilder-class-for-string-concatenation">Use the StringBuilder Class for String Concatenation</a></h2>
<p>When concatenating strings in a loop or other performance-critical code, use the StringBuilder class instead of the + operator, which creates new strings and can be slow.</p>
<p>A string is an immutable class the object created by String cannot be reused. So if we need to create a large string in case of SQL queries etc it is bad practice to concatenate the String object using the ‘+’ operator.</p>
<p>This will lead to multiple objects of String created leading to more usage of heap memory. In this case, we can use StringBuilder or StringBuffer, the former is preferential over the latter since it has a performance advantage due to non-synchronized methods. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java"> String query = String1+String2+String3;
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">StringBuilder strBuilder = new StringBuilder(“”);

strBuilder.append(String1).append(String2).append(String3);

String query = strBuilder.toString();            
</code></pre>
<h2 id="use-the-enhanced-for-loop"><a class="header" href="#use-the-enhanced-for-loop">Use the Enhanced &quot;for&quot; Loop</a></h2>
<p>When iterating over collections, use the enhanced for loop (for-each loop) instead of a regular for loop, as it is generally more efficient.</p>
<p>While iterating through any collection get the size of the collection beforehand and never get it during iteration. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">List&lt;String&gt; objList = getData();
for (int i = 0; i &lt; objList.size(); i++) { execute code ..}
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">List&lt;String&gt; objList = getData();
int size = objList.size();
for (int i = 0; i &lt; size; i++) { execute code ..} 
</code></pre>
<h2 id="avoid-multiple-if-else-statements"><a class="header" href="#avoid-multiple-if-else-statements">Avoid Multiple If-else Statements</a></h2>
<p>We use conditional statements in our code for decision-making. The conditional statements should not be overused. If we are using too many conditional if-else statements it will impact performance since JVM will have to compare the conditions. This can become worse if the same is used in looping statements like for, while, etc.</p>
<p>If there are too many conditions in your business logic try to group the conditions and get the boolean outcome and use it in the if statement. Also, we can think of using a switch statement instead of multiple if-else if possible. Switch statement has a performance advantage over if – else. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">if (condition1) {

    if (condition2) {

        if (condition3 || condition4) { execute ..}

        else { execute..}
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">boolean result = (condition1 &amp;&amp; condition2) &amp;&amp; (condition3  || condition4)  
</code></pre>
<h2 id="avoid-unnessary-method-calls"><a class="header" href="#avoid-unnessary-method-calls">Avoid Unnessary Method Calls</a></h2>
<p>Minimize the number of method calls in your code, especially in loops or other performance-critical code. For example, cache the result of a method call if it doesn't change between calls.</p>
<h2 id="optimize-memory-usage"><a class="header" href="#optimize-memory-usage">Optimize Memory Usage</a></h2>
<p>Avoid unnecessary object creation, use primitive data types when possible, and free up memory when it's no longer needed. This can help reduce memory usage and improve performance.</p>
<p>Usage of primitive types over objects is beneficial since the primitive type data is stored on stack memory and the objects are stored on heap memory. If possible, we can use primitive types instead of objects since data access from stack memory is faster than heap memory. So it is always beneficial to use <code>int</code> over <code>Integer</code> or <code>double</code> over <code>Double</code>.</p>
<p>This also applies to the use of <code>BigDecimal</code>.</p>
<p>We know that BigDecimal class provides accurate precision for the decimal values. Over usage of this object hampers the performance drastically specifically when the same is used to calculate certain values in a loop.</p>
<p>BigDecimal uses a lot of memory over long or double to perform calculations. If precision is not the constraint or if we are sure the range of the calculated value will not exceed long or double we can avoid using BigDecimal and use long or double with proper casting instead.</p>
<h2 id="avoid-creating-big-objects-often"><a class="header" href="#avoid-creating-big-objects-often">Avoid Creating Big Objects Often</a></h2>
<p>There are certain classes that act as data holders within the application. These objects are heavy and their creation should be avoided multiple times. An example of such objects is the DB connection objects or system configuration objects or session objects for the user after login.</p>
<p>These objects used a lot of resources while created. We should reuse these objects instead of creating them as creation will drastically hamper the application performance due to more memory usage. We should use the Singleton pattern wherever possible to create a single instance of the object and reuse it wherever required or clone the object instead of creating a new one.</p>
<h2 id="use-stored-procedures-instead-of-queries"><a class="header" href="#use-stored-procedures-instead-of-queries">Use Stored Procedures Instead of Queries</a></h2>
<p>It is better to write stored procedures instead of complex and long queries and call them while processing. Stored procedures are stored as objects in the database and pre-compiled.</p>
<p>The execution time of the stored procedure is less compared to the query with the same business logic as a query is compiled and executed every time wherever it is called through the application. Also, the stored procedure has an advantage in data transfer and network traffic since we are not transferring the complex query for execution every time to the database server.</p>
<h2 id="using-preparedstatement-instead-of-statement"><a class="header" href="#using-preparedstatement-instead-of-statement">Using <code>PreparedStatement</code> instead of <code>Statement</code></a></h2>
<p>While executing the SQL query through the application we use JDBC API and classes for the same. <code>PreparedStatement</code> has an advantage over <code>Statement</code> for parameterized query execution since the preparedstatement object is compiled once and executed multiple times. Statement object on other hand is compiled and executed every time it is called. Also, the prepared statement object is safe to avoid SQL injection attacks for Web Application security.</p>
<h2 id="select-required-columns-in-a-query"><a class="header" href="#select-required-columns-in-a-query">Select Required Columns in a Query</a></h2>
<p>While getting the data from the database we use select queries to get the data. Avoid selecting columns that are not necessary for further processing. Select only those columns which we will be required for further processing or display on the front end. Selecting too many columns causes a delay in query execution at the database end. Also, it increases network traffic from database to application which should be avoided.</p>
<p>The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">select * from users where user_id = 100;
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">select user_name, user_age, user_gender, user_occupation, user_address from users where user_id = 100;
</code></pre>
<h2 id="fetch-data-using-joins"><a class="header" href="#fetch-data-using-joins">Fetch Data Using Joins</a></h2>
<p>While getting the data from multiple tables it is necessary to use the joins properly on tables. If the joins are not properly used or the tables are not normalized it will cause a delay in query execution leading to a performance hit for the application. Avoid using subqueries instead of joins as subqueries take more time for execution than joins.</p>
<p>Create an index on columns of the table which are frequently used for improving the performance of query execution and reducing the latency of the application.</p>
<h2 id="use-of-unnecessary-log-statements-and-incorrect-log-levels"><a class="header" href="#use-of-unnecessary-log-statements-and-incorrect-log-levels">Use of Unnecessary Log Statements and Incorrect Log Levels</a></h2>
<p>Logging is an integral part of any application and needs to be implemented efficiently in order to avoid performance hits due to incorrect logging and log levels. We should avoid logging big objects into code. Logging should be limited to specific parameters we need to monitor and not the whole object.</p>
<p>Also, the logging level should be kept to higher levels like DEBUG, ERROR, and not INFO. The sample is provided below as an illustration which is to be avoided as follows:</p>
<pre><code class="language-java">Logger.debug(&quot;User info : &quot; + user.toString());
Logger.info(&quot;Method called for setting user data:&quot; + user.getData());
</code></pre>
<p>instead, do this:</p>
<pre><code class="language-java">Logger.debug(“User info : ” + user.getName() + ” : login ID : ” + user.getLoginId());
Logger.info(“Method called for setting user data”);
</code></pre>
<blockquote>
<p>See also <a href="coding-standard.html">Coding Standard</a></p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../administration/housekeeping.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../administration/coding-standard.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../administration/housekeeping.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../administration/coding-standard.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/pagetoc.js"></script>


    </body>
</html>
